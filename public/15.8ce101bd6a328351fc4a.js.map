{"version":3,"sources":["./src/app/dashboard/promo-codes/index/index.component.ts","./src/app/dashboard/promo-codes/index/index.component.html","./src/app/models/promo_code.model.ts","./src/app/dashboard/promo-codes/promo-codes.resolver.ts","./src/app/dashboard/promo-codes/promo-code-form/promo-code-form.component.html","./src/app/dashboard/promo-codes/promo-code-form/promo-code-form.component.ts","./src/app/dashboard/promo-codes/promo-code-details/promo-code-details.component.ts","./src/app/dashboard/promo-codes/promo-code-details/promo-code-details.component.html","./src/app/dashboard/promo-codes/promo-codes-routing.module.ts","./src/app/dashboard/promo-codes/promo-code-delete/promo-code-delete.component.ts","./src/app/dashboard/promo-codes/promo-code-delete/promo-code-delete.component.html","./src/app/dashboard/promo-codes/promo-codes.module.ts"],"names":["IndexComponent","route","context","urls","createUrl","detailsUrl","data","this","properties","key","title","type","subscribe","promocodes","id","code","start_at","finish_at","super","PromoCodesResolver","http","element","state","get","environment","apiUrl","promoCodesFetchUrl","pipe","map","e","Json2PromoCode","PromoCodeFormComponent","router","service","formGroup","required","discount","value","disabled","isDiscountDisabled","allowedTypes","open","content","backdrop","ok","PromoCodeDetailsComponent","promocode","history","resource","tableUrl","routes","path","component","runGuardsAndResolvers","resolve","children","pathMatch","PromoCodeDeleteComponent","deleteUrl","description","PromoCodesRoutingModule","forChild","PromoCodesModule","provide","useClass","multi"],"mappings":"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","file":"15.8ce101bd6a328351fc4a.js","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { PromoCode } from 'src/app/models/promo_code.model';\nimport { TableViewComponent } from 'src/app/shared/dashboard-resource/table-view/table-view.component';\nimport { ActivatedRoute } from '@angular/router';\nimport { ITableContext } from 'src/app/shared/dashboard-resource/table-view/table.context';\n\n@Component({\n  selector: 'app-index',\n  templateUrl: './index.component.html',\n  styleUrls: ['./index.component.scss']\n})\nexport class IndexComponent {\n  data: PromoCode[];\n  context: ITableContext<PromoCode> = {\n    urls: {\n      createUrl: 'create',\n      detailsUrl: ':id'\n    },\n    data: this.data,\n    properties: [\n      {\n        key: 'code',\n        title: 'Code',\n        type: 'string'\n      },\n      {\n        key: 'type',\n        title: 'type',\n        type: 'string'\n      },\n      {\n        key: 'start_at',\n        title: 'Start At',\n        type: 'datetime'\n      },\n      {\n        key: 'finish_at',\n        title: 'Finish At',\n        type: 'datetime'\n      },\n    ],\n    title: 'Promo codes'\n  };\n  @ViewChild('table') table: TableViewComponent<PromoCode>;\n\n  constructor(route: ActivatedRoute) {\n    // console.log(this.context);\n    route.data.subscribe(data => {\n      this.data = data.promocodes;\n      this.context.data = this.data;\n    });\n  }\n}\n","<app-table-view [context]=\"context\" #table></app-table-view>","import { Resource } from '../shared/dashboard-resource/resource.model';\r\n\r\nexport class PromoCode extends Resource {\r\n    constructor(public id: string, public code: string, public type: string, public start_at: Date, public finish_at: Date) {\r\n        super(id);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { environment } from '../../../environments/environment';\r\nimport { PromoCode } from '../../models/promo_code.model';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class PromoCodesResolver implements Resolve<PromoCode[]> {\r\n    public static Json2PromoCode(element: any): PromoCode {\r\n        if (!element)\r\n        {\r\n            return null;\r\n        }\r\n        return new PromoCode(element.id, element.code, element.type, element.start_at, element.finish_at);\r\n    }\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<PromoCode[]> {\r\n        return this.http.get<any[]>(`${ environment.apiUrl }/${ environment.promoCodesFetchUrl }`)\r\n            .pipe(map(data => data.map(e => PromoCodesResolver.Json2PromoCode(e))));\r\n    }\r\n}\r\n","<ngb-alert type=\"info\" (close)=\"ok()\">{{ message }}</ngb-alert>\n\n<ng-template #content>\n  <div class=\"modal-header\">\n    <h6 class=\"modal-title pt-1 mt-1\">{{ title }}</h6>\n    <button type=\"button\" class=\"close\" style=\"border: none; outline: none;\" (click)=\"ok()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <form [formGroup]=\"formGroup\">\n      <div class=\"row\">\n        <div class=\"col-12 px-3\">\n          <div class=\"form-group\">\n            <label>Type</label>\n            <select class=\"form-control\" formControlName=\"type\">\n                <option [value]=\"t.id\" *ngFor=\"let t of allowedTypes\">{{ t.title }}</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-12 px-3\">\n          <div class=\"form-group\">\n            <label>Discount</label>\n            <input type=\"text\" class=\"form-control\" formControlName=\"discount\">\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row px-1\">\n        <div class=\"col-md-6\">\n          <div class=\"form-group\">\n            <label>Start At</label>\n            <input type=\"datetime-local\" class=\"form-control\" formControlName=\"start_at\">\n          </div>\n        </div>\n        <div class=\"col-md-6\">\n          <div class=\"form-group\">\n            <label>Finish At</label>\n            <input type=\"datetime-local\" class=\"form-control\" formControlName=\"finish_at\">\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"update ml-auto mr-auto\">\n          <button type=\"submit\" class=\"btn btn-primary btn-round\" [disabled]=\"uploading || !formGroup.dirty || !formGroup.valid\" (click)=\"submit()\">\n            Submit\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</ng-template>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { ResourceFormContent } from 'src/app/shared/dashboard-resource/resource-form/resource-form.component';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { NgbModal, NgbModalRef, NgbModalOptions } from '@ng-bootstrap/ng-bootstrap';\n\n@Component({\n  selector: 'app-promo-code-form',\n  templateUrl: './promo-code-form.component.html',\n  styleUrls: ['./promo-code-form.component.scss']\n})\nexport class PromoCodeFormComponent extends ResourceFormContent {\n  title: string;\n  message: string;\n  formGroup: FormGroup;\n  allowedTypes: { title: string, id: number }[];\n\n  @ViewChild('content') content: ElementRef<HTMLElement>;\n\n  constructor(http: HttpClient, route: ActivatedRoute, router: Router, service: NgbModal) {\n    super(http, route, router, service);\n\n    this.formGroup = new FormGroup({\n      type: new FormControl(null, Validators.required),\n      discount: new FormControl({ value: null, disabled: this.isDiscountDisabled() }, Validators.required),\n      start_at: new FormControl(null, Validators.required),\n      finish_at: new FormControl(null, Validators.required),\n    });\n\n    this.allowedTypes = [\n      {\n        id: 0,\n        title: 'Percentage',\n      },\n      {\n        id: 1,\n        title: 'Constant',\n      },\n    ];\n  }\n\n  openModal(): NgbModalRef {\n    const options: NgbModalOptions = {\n      backdrop: 'static'\n    };\n\n    return this.service.open(this.content, options);\n  }\n\n  get postUrl(): string {\n    return 'promoCodesCreateUrl';\n  }\n\n  get putUrl(): string {\n    return 'promoCodesUpdateUrl';\n  }\n\n  get parentUrl(): string {\n    return '/promocodes';\n  }\n\n  private isDiscountDisabled(): boolean {\n    return this.formGroup?.value?.type;\n  }\n}\n","import { Component, OnInit, AfterViewInit, ViewChild, ElementRef } from '@angular/core';\nimport { PromoCode } from 'src/app/models/promo_code.model';\nimport { NgbModalRef, NgbModal, NgbModalOptions } from '@ng-bootstrap/ng-bootstrap';\nimport { Router } from '@angular/router';\nimport { IResourceDetailsContext } from 'src/app/shared/dashboard-resource/resource-details/resource-details.context';\nimport { PromoCodesResolver } from '../promo-codes.resolver';\n\n@Component({\n  selector: 'app-promo-code-details',\n  templateUrl: './promo-code-details.component.html',\n  styleUrls: ['./promo-code-details.component.scss']\n})\nexport class PromoCodeDetailsComponent implements OnInit {\n  public context: IResourceDetailsContext<PromoCode>;\n\n  ngOnInit(): void {\n    const promocode: PromoCode = PromoCodesResolver.Json2PromoCode(history.state.resource);\n\n    this.context = {\n      urls: {\n        tableUrl: '/promocodes',\n      },\n      data: promocode,\n      properties: [\n        {\n          key: 'code',\n          title: 'Code',\n          type: 'string'\n        },\n        {\n          key: 'type',\n          title: 'type',\n          type: 'string'\n        },\n        {\n          key: 'start_at',\n          title: 'Start At',\n          type: 'datetime'\n        },\n        {\n          key: 'finish_at',\n          title: 'Finish At',\n          type: 'datetime'\n        },\n      ],\n      title: `Details of promocode ${ promocode?.code }`\n    };\n  }\n}\n","<app-resource-details [context]=\"context\"></app-resource-details>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IndexComponent } from './index/index.component';\nimport { PromoCodesResolver } from './promo-codes.resolver';\nimport { PromoCodeFormComponent } from './promo-code-form/promo-code-form.component';\nimport { PromoCodeDetailsComponent } from './promo-code-details/promo-code-details.component';\nimport { PromoCodeDeleteComponent } from './promo-code-delete/promo-code-delete.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: IndexComponent,\n    runGuardsAndResolvers: 'always',\n    resolve: {\n      promocodes: PromoCodesResolver\n    },\n    children: [\n      {\n        path: 'create',\n        component: PromoCodeFormComponent,\n      },\n      {\n        path: ':id/edit',\n        component: PromoCodeFormComponent,\n      },\n      {\n        path: ':id/details',\n        pathMatch: 'full',\n        component: PromoCodeDetailsComponent,\n      },\n      {\n        path: ':id/delete',\n        pathMatch: 'full',\n        component: PromoCodeDeleteComponent,\n      },\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PromoCodesRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { PromoCode } from 'src/app/models/promo_code.model';\nimport { ResourceDeleteContext } from 'src/app/shared/dashboard-resource/resource-delete/resource-delete.component';\n\n@Component({\n  selector: 'app-promo-code-delete',\n  templateUrl: './promo-code-delete.component.html',\n  styleUrls: ['./promo-code-delete.component.scss']\n})\nexport class PromoCodeDeleteComponent implements OnInit {\n  context: ResourceDeleteContext<PromoCode>;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.context = {\n      deleteUrl: 'promoCodesDeleteUrl',\n      data: history.state.resource,\n      title: 'Delete Promo Code Resource!',\n      description: 'Are you sure to delete this promocode?'\n    };\n  }\n\n}\n\n","<app-resource-delete [context]=\"context\"></app-resource-delete>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { PromoCodesRoutingModule } from './promo-codes-routing.module';\nimport { IndexComponent } from './index/index.component';\nimport { PromoCodeDeleteComponent } from './promo-code-delete/promo-code-delete.component';\nimport { PromoCodeDetailsComponent } from './promo-code-details/promo-code-details.component';\nimport { PromoCodeFormComponent } from './promo-code-form/promo-code-form.component';\nimport { PromoCodesResolver } from './promo-codes.resolver';\nimport { AuthInterceptor } from '../../interceptors/auth.interceptor';\nimport { DashboardResourceModule } from 'src/app/shared/dashboard-resource/dashboard-resource.module';\n\n@NgModule({\n  declarations: [IndexComponent, PromoCodeDeleteComponent, PromoCodeDetailsComponent, PromoCodeFormComponent],\n  imports: [\n    CommonModule,\n    PromoCodesRoutingModule,\n    NgbModule,\n    RouterModule,\n    ReactiveFormsModule,\n    DashboardResourceModule\n  ],\n  providers: [\n    PromoCodesResolver,\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\n  ]\n})\nexport class PromoCodesModule { }\n"],"sourceRoot":"webpack:///"}