(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{AI31:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("fXoL"),o=r("tyNb"),s=r("ofXK");const i=["component"];function c(e,t){}function a(e,t){1&e&&(n.Rb(0,"div"),n.Cc(1,c,0,0,"ng-template",null,3,n.Dc),n.Qb())}function l(e,t){if(1&e&&(n.Rb(0,"div"),n.Rb(1,"h6"),n.Ec(2),n.Qb(),n.Rb(3,"small"),n.Ec(4),n.fc(5,"uppercase"),n.Qb(),n.Qb()),2&e){const e=n.ec();n.yb(2),n.Fc(e.resource.toTitle(e.prop,e.route)),n.yb(2),n.Fc(n.gc(5,2,e.prop.title))}}function u(e,t){if(1&e&&(n.Rb(0,"div"),n.Rb(1,"h6"),n.Ec(2),n.Qb(),n.Rb(3,"small"),n.Ec(4),n.fc(5,"uppercase"),n.Qb(),n.Qb()),2&e){const e=n.ec();n.yb(2),n.Fc(e.resource.toTitle(e.prop)),n.yb(2),n.Fc(n.gc(5,2,e.prop.title))}}let p=(()=>{class e{constructor(e,t){this.resolver=e,this.route=t}ngAfterViewInit(){if("component"===this.prop.type){const e=this.resolver.resolveComponentFactory(this.prop.component.type);this.instance=this.component.createComponent(e),this.prop.component.configureInstance(this.instance,this.resource,this.prop),this.instance.changeDetectorRef.detectChanges()}}ngOnDestroy(){this.instance&&this.instance.destroy()}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(n.j),n.Lb(o.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-resource-property-details"]],viewQuery:function(e,t){var r;1&e&&n.Jc(i,!0,n.P),2&e&&n.sc(r=n.dc())&&(t.component=r.first)},inputs:{resource:"resource",prop:"prop"},decls:4,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["component",""]],template:function(e,t){1&e&&(n.Pb(0,0),n.Cc(1,a,3,0,"div",1),n.Cc(2,l,6,4,"div",1),n.Cc(3,u,6,4,"div",2),n.Ob()),2&e&&(n.lc("ngSwitch",t.prop.type),n.yb(1),n.lc("ngSwitchCase","component"),n.yb(1),n.lc("ngSwitchCase","data"))},directives:[s.y,s.z,s.A],pipes:[s.I],styles:[""]}),e})()},AMeL:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("fXoL"),o=r("tyNb"),s=r("OC8m"),i=r("1kSV"),c=r("ofXK"),a=r("AI31"),l=r("m1XX");const u=["content"];function p(e,t){if(1&e&&n.Mb(0,"app-resource-property-details",14),2&e){const e=t.$implicit,r=n.ec(2);n.lc("resource",r.context.data)("prop",e)}}function b(e,t){if(1&e&&(n.Rb(0,"button",15),n.Ec(1," Print "),n.Qb()),2&e){const e=n.ec(2);n.lc("useExistingCss",!0)("printTitle",e.context.title)}}function d(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",2),n.Rb(1,"h6",3),n.Ec(2),n.Qb(),n.Rb(3,"button",4),n.cc("click",(function(){return n.uc(e),n.ec().done()})),n.Rb(4,"span",5),n.Ec(5,"\xd7"),n.Qb(),n.Qb(),n.Qb(),n.Rb(6,"div",6),n.Rb(7,"div",7),n.Cc(8,p,1,2,"app-resource-property-details",8),n.Qb(),n.Rb(9,"div",9),n.Rb(10,"div",10),n.Cc(11,b,2,2,"button",11),n.Rb(12,"button",12),n.cc("click",(function(){return n.uc(e),n.ec().done()})),n.Mb(13,"i",13),n.Ec(14," Done "),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.ec();n.yb(2),n.Fc(e.context.title),n.yb(6),n.lc("ngForOf",e.context.properties),n.yb(3),n.lc("ngIf",e.context.printable)}}let m=(()=>{class e{constructor(e,t,r,n){this.router=e,this.notifier=t,this.modalService=r,this.route=n}ngAfterViewInit(){if(!this.context||!this.context.data||!this.context.properties)return this.notifier.warning("Something went wrong, Undefined context","Resource Details"),void this.done();this.modal=this.modalService.open(this.content,{size:"md",backdrop:"static",keyboard:!1}),history.state.print&&setTimeout(()=>{document.getElementById("printer").click()},2e3)}done(){var e,t;const r=(null===(t=null===(e=this.context)||void 0===e?void 0:e.urls)||void 0===t?void 0:t.tableUrl)||"/users";console.log(r),this.router.navigateByUrl(r).then(e=>{var t;e&&(null===(t=this.modal)||void 0===t||t.dismiss(),this.modalService.dismissAll())})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(o.f),n.Lb(s.a),n.Lb(i.r),n.Lb(o.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-resource-details"]],viewQuery:function(e,t){var r;1&e&&n.Jc(u,!0),2&e&&n.sc(r=n.dc())&&(t.content=r.first)},inputs:{context:"context"},decls:4,vars:1,consts:[["type","info",3,"close"],["content",""],[1,"modal-header"],[1,"modal-title","pt-1","mt-1"],["type","button",1,"close",2,"border","none","outline","none",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","resource-details",1,"list-group"],["class","list-group-item list-group-item-action",3,"resource","prop",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","text-right"],["id","printer","class","btn btn-md btn-rounded btn-secondary px-3","printSectionId","resource-details","ngxPrint","",3,"useExistingCss","printTitle",4,"ngIf"],["type","button",1,"btn","btn-md","btn-rounded","btn-primary","px-3",3,"click"],[1,"nc-icon","nc-check-2"],[1,"list-group-item","list-group-item-action",3,"resource","prop"],["id","printer","printSectionId","resource-details","ngxPrint","",1,"btn","btn-md","btn-rounded","btn-secondary","px-3",3,"useExistingCss","printTitle"]],template:function(e,t){1&e&&(n.Rb(0,"ngb-alert",0),n.cc("close",(function(){return t.done()})),n.Ec(1),n.Qb(),n.Cc(2,d,15,3,"ng-template",null,1,n.Dc)),2&e&&(n.yb(1),n.Fc(t.context.title))},directives:[i.c,c.t,c.u,a.a,l.a],styles:[""]}),e})()},n0rM:function(e,t,r){"use strict";r.r(t),r.d(t,"UsersModule",(function(){return S}));var n=r("ofXK"),o=r("tyNb"),s=r("Tj/N"),i=r("Ubi2"),c=r("fXoL");const a=["table"];let l=(()=>{class e{constructor(e){this.context={urls:{createUrl:"/users/create",detailsUrl:"/:id"},pagination:void 0,properties:[{key:"user_name",title:"User Name",type:"string"},{key:"email",title:"Email",type:"string"},{key:"role.name",title:"Role",type:"string"},{key:"status.title",title:"Status",type:"enum",enum:s.c}],title:"Users"},i.a.initializePaginationContext(e,this.context)}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(o.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-index"]],viewQuery:function(e,t){var r;1&e&&c.Jc(a,!0),2&e&&c.sc(r=c.dc())&&(t.table=r.first)},decls:2,vars:1,consts:[[3,"context"],["table",""]],template:function(e,t){1&e&&c.Mb(0,"app-table-view",0,1),2&e&&c.lc("context",t.context)},directives:[i.a],styles:[""]}),e})();var u=r("tk/3"),p=r("AytR"),b=r("lJxs");let d=(()=>{class e{constructor(e){this.http=e}static json2User(e){return e?new s.b(e.id,e.user_name,e.email,e.first_name,e.last_name,e.role_id,e.status_id,e.created_at,e.updated_at,e.address,e.phone_number,e.province_id,e.province,e.role,e.status):null}resolve(t,r){let n=new u.f;return Object.keys(t.queryParams).forEach(e=>n=n.set(e,t.queryParams[e])),this.http.get(p.a.prepareUrl("usersFetchUrl"),{params:n}).pipe(Object(b.a)(t=>({data:t.data.map(t=>e.json2User(t)),total:t.total,per_page:t.per_page,current_page:t.current_page,from:t.from,to:t.to,path:t.path,first_page_url:t.first_page_url,prev_page_url:t.prev_page_url,next_page_url:t.next_page_url,last_page_url:t.last_page_url,last_page:t.last_page,filter:new Map})))}}return e.\u0275fac=function(t){return new(t||e)(c.Zb(u.b))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac}),e})();var m=r("AMeL");let f=(()=>{class e{constructor(e){e.parent.data.subscribe(t=>{e.params.subscribe(e=>{const r=Number.parseInt(e.id,10),n=t.resources.data.find(e=>e.id===r);this.context={urls:{tableUrl:"/users"},data:n,properties:[{key:"user_name",title:"User Name",type:"string"},{key:"first_name",title:"First Name",type:"string"},{key:"last_name",title:"Last Name",type:"string"},{key:"email",title:"Email",type:"string"},{key:"role.name",title:"Role",type:"string"},{key:"status.title",title:"Status",type:"enum",enum:s.c},{key:"created_at",title:"Created At",type:"datetime"},{key:"updated_at",title:"Updated At",type:"datetime"}],title:"Details of user "+(null==n?void 0:n.user_name)}})})}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(o.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-user-details"]],decls:1,vars:1,consts:[[3,"context"]],template:function(e,t){1&e&&c.Mb(0,"app-resource-details",0),2&e&&c.lc("context",t.context)},directives:[m.a],styles:[""]}),e})();var v=r("3Pt+"),y=r("0PJQ"),h=r("1kSV");const g=["content"];function R(e,t){1&e&&(c.Rb(0,"div",8),c.Rb(1,"div",23),c.Rb(2,"div",10),c.Rb(3,"label"),c.Ec(4,"Password"),c.Qb(),c.Mb(5,"input",24),c.Qb(),c.Qb(),c.Qb())}function w(e,t){1&e&&(c.Rb(0,"div",8),c.Rb(1,"div",23),c.Rb(2,"div",10),c.Rb(3,"label"),c.Ec(4,"Password Confirmation"),c.Qb(),c.Mb(5,"input",25),c.Qb(),c.Qb(),c.Qb())}function Q(e,t){if(1&e&&(c.Rb(0,"option",26),c.Ec(1),c.Qb()),2&e){const e=t.$implicit;c.lc("value",e.id),c.yb(1),c.Fc(e.name)}}function C(e,t){if(1&e){const e=c.Sb();c.Rb(0,"div",2),c.Rb(1,"h6",3),c.Ec(2),c.Qb(),c.Rb(3,"button",4),c.cc("click",(function(){return c.uc(e),c.ec().ok()})),c.Rb(4,"span",5),c.Ec(5,"\xd7"),c.Qb(),c.Qb(),c.Qb(),c.Rb(6,"div",6),c.Rb(7,"form",7),c.Rb(8,"div",8),c.Rb(9,"div",9),c.Rb(10,"div",10),c.Rb(11,"label"),c.Ec(12,"Username"),c.Qb(),c.Mb(13,"input",11),c.Qb(),c.Qb(),c.Qb(),c.Rb(14,"div",8),c.Rb(15,"div",9),c.Rb(16,"div",10),c.Rb(17,"label"),c.Ec(18,"Email address"),c.Qb(),c.Mb(19,"input",12),c.Qb(),c.Qb(),c.Qb(),c.Rb(20,"div",8),c.Rb(21,"div",13),c.Rb(22,"div",10),c.Rb(23,"label"),c.Ec(24,"First Name"),c.Qb(),c.Mb(25,"input",14),c.Qb(),c.Qb(),c.Rb(26,"div",15),c.Rb(27,"div",10),c.Rb(28,"label"),c.Ec(29,"Last Name"),c.Qb(),c.Mb(30,"input",16),c.Qb(),c.Qb(),c.Qb(),c.Cc(31,R,6,0,"div",17),c.Cc(32,w,6,0,"div",17),c.Rb(33,"div",8),c.Rb(34,"div",18),c.Rb(35,"div",10),c.Rb(36,"label"),c.Ec(37,"Role"),c.Qb(),c.Rb(38,"select",19),c.Cc(39,Q,2,2,"option",20),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(40,"div",8),c.Rb(41,"div",21),c.Rb(42,"button",22),c.cc("click",(function(){return c.uc(e),c.ec().submit()})),c.Ec(43," Submit "),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb()}if(2&e){const e=c.ec();c.yb(2),c.Fc(e.title),c.yb(5),c.lc("formGroup",e.formGroup),c.yb(24),c.lc("ngIf",!e.isEdit),c.yb(1),c.lc("ngIf",!e.isEdit),c.yb(7),c.lc("ngForOf",e.roles),c.yb(3),c.lc("disabled",e.uploading||!e.formGroup.dirty||!e.formGroup.valid)}}function _(e){var t,r;const n=e.parent,o=null===(r=null===(t=null==n?void 0:n.controls)||void 0===t?void 0:t.password)||void 0===r?void 0:r.value;return o&&e.value&&o===e.value?null:{passwordConfirmation:{valid:!1}}}let x=(()=>{class e extends y.b{constructor(e,t,r,n){super(e,t,r,n),t.data.subscribe(e=>{this.roles=e.roles.data}),this.formGroup=new v.i({user_name:new v.f(null,v.C.required),email:new v.f(null,v.C.required),first_name:new v.f(null,v.C.required),last_name:new v.f(null,v.C.required),role_id:new v.f(null,v.C.required)})}initData(){super.initData(),this.isEdit||(this.formGroup.addControl("password",new v.f(null,[v.C.required,v.C.minLength(8)])),this.formGroup.addControl("password_confirmation",new v.f(null,[v.C.required,v.C.minLength(8),_])))}openModal(){return this.service.open(this.content,{backdrop:"static",keyboard:!1})}get postUrl(){return"usersCreateUrl"}get putUrl(){return"usersCreateUrl"}get parentUrl(){return"/users"}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(u.b),c.Lb(o.a),c.Lb(o.f),c.Lb(h.r))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-user-form"]],viewQuery:function(e,t){var r;1&e&&c.Jc(g,!0),2&e&&c.sc(r=c.dc())&&(t.content=r.first)},features:[c.vb],decls:4,vars:1,consts:[["type","info",3,"close"],["content",""],[1,"modal-header"],[1,"modal-title","pt-1","mt-1"],["type","button",1,"close",2,"border","none","outline","none",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"row"],[1,"col-12","px-3"],[1,"form-group"],["type","text","placeholder","Username","formControlName","user_name","autocomplete","name",1,"form-control"],["type","email","placeholder","Email","formControlName","email","autocomplete","email",1,"form-control"],[1,"col-md-6","pr-1"],["type","text","placeholder","First Name","formControlName","first_name","autocomplete","given-name",1,"form-control"],[1,"col-md-6","pl-1"],["type","text","placeholder","Last Name","formControlName","last_name","autocomplete","family-name",1,"form-control"],["class","row",4,"ngIf"],[1,"col-md-12","px-3"],["placeholder","Role","formControlName","role_id",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"update","ml-auto","mr-auto"],["type","submit",1,"btn","btn-primary","btn-round",3,"disabled","click"],[1,"col-md-12"],["type","password","placeholder","Password","formControlName","password","autocomplete","new-password",1,"form-control"],["type","password","placeholder","Re-type password","formControlName","password_confirmation","autocomplete","new-password",1,"form-control"],[3,"value"]],template:function(e,t){1&e&&(c.Rb(0,"ngb-alert",0),c.cc("close",(function(){return t.ok()})),c.Ec(1),c.Qb(),c.Cc(2,C,44,6,"ng-template",null,1,c.Dc)),2&e&&(c.yb(1),c.Fc(t.message))},directives:[h.c,v.E,v.r,v.j,v.c,v.q,v.h,n.u,v.A,n.t,v.t,v.D],styles:[""]}),e})();var k=r("w+MF");let E=(()=>{class e{constructor(e){e.parent.data.subscribe(t=>{e.params.subscribe(e=>{const r=Number.parseInt(e.id,10),n=t.resources.data.find(e=>e.id===r);console.log(n),this.context={deleteUrl:"usersDeleteUrl",data:n,title:"Delete User Resource!",description:"Are you sure to delete this user?"}})})}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(o.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-user-delete"]],decls:1,vars:1,consts:[[3,"context"]],template:function(e,t){1&e&&c.Mb(0,"app-resource-delete",0),2&e&&c.lc("context",t.context)},directives:[k.a],styles:[""]}),e})();var F=r("pMMm");const U=[{path:"",component:l,runGuardsAndResolvers:(e,t)=>{var r;return null!==(r=history.state.runResolvers)&&void 0!==r&&r},resolve:{resources:d},children:[{path:"create",component:x,resolve:{roles:F.a}},{path:":id/edit",component:x,resolve:{roles:F.a}},{path:":id/details",pathMatch:"full",component:f},{path:":id/delete",pathMatch:"full",component:E}]}];let L=(()=>{class e{constructor(){this.registerResourceComponents()}registerResourceComponents(){y.a.TYPES.set("userForm",x)}}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},imports:[[o.j.forChild(U)],o.j]}),e})();var M=r("uP1v"),N=r("RDNO");let S=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},providers:[d,F.a,{provide:u.a,useClass:N.a,multi:!0}],imports:[[n.c,L,h.s,o.j,v.y,M.a]]}),e})()}}]);