(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0AOE":function(t,e,r){"use strict";r.r(e),r.d(e,"OrdersModule",(function(){return z}));var i=r("ofXK"),n=r("m1XX"),o=r("tyNb"),c=r("9xMI");class s extends c.a{constructor(t,e,r,i){super(t),this.id=t,this.status=e,this.client=r,this.products=i}get highlight(){return this.status.title===l.Pending?"bg-highlighted":""}}class a{constructor(t,e,r,i){this.product=t,this.order=e,this.quantity=r,this.price=i}}let l=(()=>{class t{constructor(t){this.title=t}}return t.Pending=0,t.Accepted=1,t.Shipping=2,t.Deliveried=3,t.Rejected=4,t.Canceled=5,t})();var d=function(t){return t[t.Pending=0]="Pending",t[t.Accepted=1]="Accepted",t[t.Shipping=2]="Shipping",t[t.Deliveried=3]="Deliveried",t[t.Rejected=4]="Rejected",t[t.Canceled=5]="Canceled",t}({}),u=r("fXoL"),b=r("Ubi2");const p=["table"];let m=(()=>{class t{constructor(t,e){this.route=t,this.router=e,this.status=t.snapshot.params.status,this.context={urls:{createUrl:"/orders/create",detailsUrl:"/:id"},data:this.data,properties:[{key:"status.title",title:"Status",type:"enum",enum:d},{key:"client.name",title:"Name",type:"string"},{key:"client.phone",title:"Phone",type:"string"}],title:"Orders",actions:[{icon:"nc-icon nc-bell-55",type:"url",url:":id/status",name:"change status"},{icon:"nc-icon nc-single-copy-04",name:"print",type:"callback",callback:t=>{this.print(t)}}]},t.data.subscribe(t=>{this.data=t.resources,this.context.data=this.data}),t.queryParams.subscribe(t=>{this.status=(null==t?void 0:t.status)||-1})}print(t){this.router.navigate(["orders",t.id,"details"],{state:{resource:t,print:!0}})}filter(){this.router.navigate(["."],{relativeTo:this.route,queryParams:{status:this.status}})}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(o.a),u.Lb(o.f))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-index"]],viewQuery:function(t,e){var r;1&t&&u.Ic(p,!0),2&t&&u.sc(r=u.dc())&&(e.table=r.first)},decls:2,vars:1,consts:[[3,"context"],["table",""]],template:function(t,e){1&t&&u.Mb(0,"app-table-view",0,1),2&t&&u.lc("context",e.context)},directives:[b.a],styles:[""]}),t})();var h=r("tk/3"),f=r("AytR"),v=r("lJxs"),g=r("3hzH"),y=r("5dVO");let R=(()=>{class t{constructor(t,e){this.http=t,this.loader=e}static Json2Order(t){if(!t)return null;const e=((null==t?void 0:t.order_products)||(null==t?void 0:t.products)).map(e=>new a(new g.b(e.product.id,e.product.en_name,e.product.ar_name,e.product.en_description,e.product.ar_description,e.product.is_main,e.product.price_id,null,e.product.brand_id,null,e.product.category_id,null,e.product.created_at,e.product.updated_at,null),new s(null==t?void 0:t.id,null==t?void 0:t.status,null,null),e.quantity,new g.a(e.price.id,e.price.value,e.price.updated_at)));return new s(null==t?void 0:t.id,null==t?void 0:t.status,null==t?void 0:t.client,e)}resolve(e,r){const i=(new h.f).append("status",e.queryParams.status||-1);return this.http.get(`${f.a.apiUrl}/${f.a.ordersFetchUrl}`,{params:i}).pipe(Object(v.a)(e=>e.map(e=>t.Json2Order(e))))}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(h.b),u.Zb(y.a))},t.\u0275prov=u.Hb({token:t,factory:t.\u0275fac}),t})();var Q=r("0PJQ"),x=r("3Pt+"),w=r("1kSV");function k(t,e){1&t&&(u.Rb(0,"th",7),u.Dc(1,"Actions"),u.Qb())}function D(t,e){if(1&t){const t=u.Sb();u.Rb(0,"td",9),u.Rb(1,"i",10),u.cc("click",(function(){u.uc(t);const e=u.ec().$implicit;return u.ec().context.edit(e)})),u.Qb(),u.Rb(2,"i",11),u.cc("click",(function(){u.uc(t);const e=u.ec().$implicit;return u.ec().context.remove(e)})),u.Qb(),u.Qb()}}function C(t,e){if(1&t&&(u.Rb(0,"tr"),u.Rb(1,"td"),u.Dc(2),u.Qb(),u.Rb(3,"td"),u.Dc(4),u.Qb(),u.Rb(5,"td"),u.Dc(6),u.Qb(),u.Rb(7,"td"),u.Dc(8),u.Qb(),u.Bc(9,D,3,0,"td",8),u.Qb()),2&t){const t=e.$implicit,r=u.ec();u.yb(2),u.Ec(t.product.en_name),u.yb(2),u.Ec(t.quantity),u.yb(2),u.Ec(t.price.value),u.yb(2),u.Ec(t.quantity*t.price.value),u.yb(1),u.lc("ngIf",r.context.editable)}}let F=(()=>{class t{set value(t){this.context.items=t}get value(){return this.context.items}ngOnInit(){}setItems(t){this.context.items=t}get fees(){var t;return(null===(t=this.context.province)||void 0===t?void 0:t.fees)||0}get total(){return this.context.items&&0!==this.context.items.length?this.context.items.reduce(this.reduceItem,0):0}get totalWithFees(){return this.total+this.fees}reduceItem(t,e){return t+e.quantity*e.price.value}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Fb({type:t,selectors:[["app-order-products-details"]],inputs:{value:"value",property:"property",context:"context"},decls:29,vars:4,consts:[[1,"table-responsive","overflow-hidden"],[1,"table"],[1,"text-primary"],["class","text-right",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],[1,"text-danger"],[1,"text-right"],["class","text-right actions",4,"ngIf"],[1,"text-right","actions"],["title","Edit",1,"fa","fa-edit","m-1","p-1",3,"click"],["title","Cancel",1,"fa","fa-times","m-1","p-1",3,"click"]],template:function(t,e){1&t&&(u.Rb(0,"div",0),u.Rb(1,"table",1),u.Rb(2,"thead",2),u.Rb(3,"th"),u.Dc(4,"Product"),u.Qb(),u.Rb(5,"th"),u.Dc(6,"Quantity"),u.Qb(),u.Rb(7,"th"),u.Dc(8,"Price"),u.Qb(),u.Rb(9,"th"),u.Dc(10,"Total"),u.Qb(),u.Bc(11,k,2,0,"th",3),u.Qb(),u.Rb(12,"tbody"),u.Bc(13,C,10,5,"tr",4),u.Qb(),u.Rb(14,"tfoot"),u.Rb(15,"tr"),u.Rb(16,"th",5),u.Dc(17," Shipping Fees "),u.Qb(),u.Rb(18,"th",6),u.Dc(19),u.Qb(),u.Rb(20,"th"),u.Dc(21,"\xa0"),u.Qb(),u.Qb(),u.Rb(22,"tr"),u.Rb(23,"th",5),u.Dc(24,"\xa0"),u.Qb(),u.Rb(25,"th",6),u.Dc(26),u.Qb(),u.Rb(27,"th"),u.Dc(28,"\xa0"),u.Qb(),u.Qb(),u.Qb(),u.Qb(),u.Qb()),2&t&&(u.yb(11),u.lc("ngIf",e.context.editable),u.yb(2),u.lc("ngForOf",e.context.items),u.yb(6),u.Ec(e.fees),u.yb(7),u.Ec(e.totalWithFees))},directives:[i.n,i.m],styles:[""]}),t})();function S(t,e){if(1&t&&(u.Rb(0,"option",10),u.Dc(1),u.Qb()),2&t){const t=e.$implicit;u.lc("value",t.id),u.yb(1),u.Fc(" ",t.en_name," ")}}let I=(()=>{class t{constructor(t,e){this.http=t,this.onChange=()=>{},this.onTouch=()=>{},this.data=[],this.http.get(f.a.prepareUrl("productsFetchUrl")).subscribe(t=>this.products=t),this.itemForm=new x.e({product_id:new x.c(null,x.r.required),quantity:new x.c(1,[x.r.required,x.r.min(1)])}),e.parent.data.subscribe(t=>{e.params.subscribe(e=>{const r=Number.parseInt(e.id,10),i=t.resources.find(t=>t.id===r).client.province,n=t.provinces.find(t=>t.ar_name===i||t.en_name===i);this.context={editable:!0,edit:t=>{this.editItem(t)},remove:t=>{this.removeItem(t)},items:this.data,province:n}})})}set value(t){this.data=t,this.onChange(t),this.onTouch(t),this.context.items=t}writeValue(t){t||(t=[]),this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}ngOnInit(){}get freeProducts(){return this.products?Array.isArray(this.data)&&0!==this.data.length?this.products.filter(t=>!this.data.some(e=>e.product.id.toString()===t.id.toString())):this.products:[]}addItem(){const t=this.products.find(t=>t.id.toString()===this.itemForm.value.product_id.toString()),e=Object.assign({product:t,price:t.price},this.itemForm.value);this.data.push(e),this.itemForm.reset(),this.writeValue(this.data)}removeItem(t){this.data.splice(this.data.indexOf(t),1),this.writeValue(this.data)}editItem(t){this.removeItem(t),this.itemForm.reset({product_id:t.product.id,quantity:t.quantity})}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(h.b),u.Lb(o.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-order-products-form"]],inputs:{data:"data"},features:[u.xb([{provide:x.j,useExisting:Object(u.T)(()=>t),multi:!0}])],decls:17,vars:4,consts:[[3,"context"],[1,"form",3,"formGroup"],[1,"row"],[1,"col","md-5"],[1,"form-group"],["formControlName","product_id",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","quantity",1,"form-control","form-control-sm"],[1,"col","md-2","d-flex","align-items-end"],[1,"btn","btn-md","btn-success",3,"disabled","click"],[3,"value"]],template:function(t,e){1&t&&(u.Mb(0,"app-order-products-details",0),u.Rb(1,"form",1),u.Rb(2,"div",2),u.Rb(3,"div",3),u.Rb(4,"div",4),u.Rb(5,"label"),u.Dc(6,"Product"),u.Qb(),u.Rb(7,"select",5),u.Bc(8,S,2,2,"option",6),u.Qb(),u.Qb(),u.Qb(),u.Rb(9,"div",3),u.Rb(10,"div",4),u.Rb(11,"label"),u.Dc(12,"Quantity"),u.Qb(),u.Mb(13,"input",7),u.Qb(),u.Qb(),u.Rb(14,"div",8),u.Rb(15,"button",9),u.cc("click",(function(){return e.addItem()})),u.Dc(16," OK "),u.Qb(),u.Qb(),u.Qb(),u.Qb()),2&t&&(u.lc("context",e.context),u.yb(1),u.lc("formGroup",e.itemForm),u.yb(7),u.lc("ngForOf",e.freeProducts),u.yb(7),u.lc("disabled",!e.itemForm.valid))},directives:[F,x.t,x.l,x.f,x.q,x.k,x.d,i.m,x.b,x.n,x.s],styles:[""]}),t})();function O(t,e){if(1&t&&(u.Rb(0,"option",12),u.Dc(1),u.Qb()),2&t){const t=e.$implicit;u.lc("value",t.id),u.yb(1),u.Ec(t.user_name)}}let P=(()=>{class t{constructor(t){this.http=t,this.onChange=()=>{},this.onTouch=()=>{},this.http.get(f.a.prepareUrl("usersFetchUrl")).subscribe(t=>this.users=t)}set value(t){this.data=t,this.onChange(t),this.onTouch(t)}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}ngOnInit(){this.form.valueChanges.subscribe(t=>{this.writeValue(this.form.value)})}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(h.b))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-order-client-form"]],inputs:{form:"form"},features:[u.xb([{provide:x.j,useExisting:Object(u.T)(()=>t),multi:!0}])],decls:38,vars:2,consts:[["autocomplete","off",3,"formGroup"],[1,"row"],[1,"col-12","px-3"],[1,"form-group"],["type","text","placeholder","Name","formControlName","name","autocomplete","off",1,"form-control"],["type","text","placeholder","Phone","formControlName","phone","autocomplete","off",1,"form-control"],["type","text","placeholder","Province","formControlName","province","autocomplete","off",1,"form-control"],[1,"col-md-12","px-3"],["type","text","placeholder","Address","formControlName","address","autocomplete","off",1,"form-control"],["type","text","placeholder","Notes","formControlName","notes","autocomplete","off",1,"form-control"],["formControlName","user_id",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(u.Rb(0,"form",0),u.Rb(1,"div",1),u.Rb(2,"div",2),u.Rb(3,"div",3),u.Rb(4,"label"),u.Dc(5,"Name"),u.Qb(),u.Mb(6,"input",4),u.Qb(),u.Qb(),u.Qb(),u.Rb(7,"div",1),u.Rb(8,"div",2),u.Rb(9,"div",3),u.Rb(10,"label"),u.Dc(11,"Phone"),u.Qb(),u.Mb(12,"input",5),u.Qb(),u.Qb(),u.Qb(),u.Rb(13,"div",1),u.Rb(14,"div",2),u.Rb(15,"div",3),u.Rb(16,"label"),u.Dc(17,"Province"),u.Qb(),u.Mb(18,"input",6),u.Qb(),u.Qb(),u.Qb(),u.Rb(19,"div",1),u.Rb(20,"div",7),u.Rb(21,"div",3),u.Rb(22,"label"),u.Dc(23,"Address"),u.Qb(),u.Mb(24,"input",8),u.Qb(),u.Qb(),u.Qb(),u.Rb(25,"div",1),u.Rb(26,"div",7),u.Rb(27,"div",3),u.Rb(28,"label"),u.Dc(29,"Notes"),u.Qb(),u.Mb(30,"input",9),u.Qb(),u.Qb(),u.Qb(),u.Rb(31,"div",1),u.Rb(32,"div",7),u.Rb(33,"div",3),u.Rb(34,"label"),u.Dc(35,"User (Optional)"),u.Qb(),u.Rb(36,"select",10),u.Bc(37,O,2,2,"option",11),u.Qb(),u.Qb(),u.Qb(),u.Qb(),u.Qb()),2&t&&(u.lc("formGroup",e.form),u.yb(37),u.lc("ngForOf",e.users))},directives:[x.t,x.l,x.f,x.b,x.k,x.d,x.q,i.m,x.n,x.s],styles:[""]}),t})();const L=["content"];function M(t,e){if(1&t){const t=u.Sb();u.Rb(0,"div",2),u.Rb(1,"h6",3),u.Dc(2),u.Qb(),u.Rb(3,"button",4),u.cc("click",(function(){return u.uc(t),u.ec().ok()})),u.Rb(4,"span",5),u.Dc(5,"\xd7"),u.Qb(),u.Qb(),u.Qb(),u.Rb(6,"div",6),u.Rb(7,"form",7),u.Rb(8,"div",8),u.Rb(9,"div",9),u.Rb(10,"div",10),u.Rb(11,"label"),u.Dc(12,"Products"),u.Qb(),u.Rb(13,"div",11),u.Mb(14,"app-order-products-form",12),u.Qb(),u.Qb(),u.Qb(),u.Qb(),u.Rb(15,"div",8),u.Rb(16,"div",9),u.Rb(17,"div",10),u.Rb(18,"label"),u.Dc(19,"Promo Code"),u.Qb(),u.Mb(20,"input",13),u.Qb(),u.Qb(),u.Qb(),u.Rb(21,"div",8),u.Rb(22,"div",9),u.Mb(23,"app-order-client-form",14),u.Qb(),u.Qb(),u.Rb(24,"div",8),u.Rb(25,"div",15),u.Rb(26,"button",16),u.cc("click",(function(){return u.uc(t),u.ec().submit()})),u.Dc(27," Submit "),u.Qb(),u.Qb(),u.Qb(),u.Qb(),u.Qb()}if(2&t){const t=u.ec();u.yb(2),u.Ec(t.title),u.yb(5),u.lc("formGroup",t.formGroup),u.yb(16),u.lc("form",t.formGroup.controls.client),u.yb(3),u.lc("disabled",t.uploading||!t.formGroup.dirty||!t.formGroup.valid)}}let _=(()=>{class t extends Q.b{constructor(t,e,r,i){super(t,e,r,i),this.formGroup=new x.e({promo_code:new x.c(null,[x.r.minLength(8),x.r.maxLength(8)]),products:new x.c(null,x.r.required),client:new x.e({name:new x.c(null,[x.r.required,x.r.minLength(3)]),phone:new x.c(null,[x.r.required]),province:new x.c(null,[x.r.required]),address:new x.c(null,[x.r.required]),notes:new x.c(null),user_id:new x.c(null)})})}openModal(){var t,e;return this.products=null===(e=R.Json2Order(null===(t=null===history||void 0===history?void 0:history.state)||void 0===t?void 0:t.resource))||void 0===e?void 0:e.products,this.service.open(this.content,{backdrop:"static",keyboard:!1})}get postUrl(){return"ordersCreateUrl"}get putUrl(){return"ordersUpdateUrl"}get parentUrl(){return"/orders"}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(h.b),u.Lb(o.a),u.Lb(o.f),u.Lb(w.d))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-order-form"]],viewQuery:function(t,e){var r;1&t&&u.Ic(L,!0),2&t&&u.sc(r=u.dc())&&(e.content=r.first)},features:[u.vb],decls:4,vars:1,consts:[["type","info",3,"close"],["content",""],[1,"modal-header"],[1,"modal-title","pt-1","mt-1"],["type","button",1,"close",2,"border","none","outline","none",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"row"],[1,"col-12","px-3"],[1,"form-group"],[1,"form-control"],["formControlName","products"],["type","text","placeholder","Ex. BX6GHIK8","formControlName","promo_code","autocomplete","off",1,"form-control"],[3,"form"],[1,"update","ml-auto","mr-auto"],["type","submit",1,"btn","btn-primary","btn-round",3,"disabled","click"]],template:function(t,e){1&t&&(u.Rb(0,"ngb-alert",0),u.cc("close",(function(){return e.ok()})),u.Dc(1),u.Qb(),u.Bc(2,M,28,4,"ng-template",null,1,u.Cc)),2&t&&(u.yb(1),u.Ec(e.message))},directives:[w.b,x.t,x.l,x.f,I,x.k,x.d,x.b,P],styles:[""]}),t})();var E=r("OC8m"),N=r("AMeL");let U=(()=>{class t{constructor(t,e){t.parent.data.subscribe(r=>{t.params.subscribe(t=>{const i=Number.parseInt(t.id,10),n=r.resources.find(t=>t.id===i),o=n.client.province,c=r.provinces.find(t=>t.ar_name===o||t.en_name===o);o&&c||e.error("Failed to detect order's province, Fees will not calculated."),this.productsContext={editable:!1,items:null==n?void 0:n.products,province:c},this.context={urls:{tableUrl:"/orders"},data:n,properties:[{key:"id",title:"Id",type:"string"},{key:"status.title",title:"Status",type:"enum",enum:d},{key:"client.name",title:"Name",type:"string"},{key:"client.phone",title:"Phone",type:"string"},{key:"client.province",title:"Province",type:"string"},{key:"client.address",title:"Address",type:"string"},{key:"client.notes",title:"Notes",type:"string"},{key:"products",title:"Products",type:"component",component:"app-order-products-details"}],title:"Details of order "+(null==n?void 0:n.id),printable:!0}})})}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(o.a),u.Lb(E.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-order-details"]],decls:2,vars:2,consts:[[3,"context"]],template:function(t,e){1&t&&(u.Rb(0,"app-resource-details",0),u.Mb(1,"app-order-products-details",0),u.Qb()),2&t&&(u.lc("context",e.context),u.yb(1),u.lc("context",e.productsContext))},directives:[N.a,F],styles:[""]}),t})();var q=r("w+MF");let A=(()=>{class t{constructor(t){t.parent.data.subscribe(e=>{t.params.subscribe(t=>{const r=Number.parseInt(t.id,10),i=e.resources.find(t=>t.id===r);this.context={deleteUrl:"ordersDeleteUrl",data:i,title:"Delete Order Resource!",description:"Are you sure to delete this order?"}})})}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(o.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-order-delete"]],decls:1,vars:1,consts:[[3,"context"]],template:function(t,e){1&t&&u.Mb(0,"app-resource-delete",0),2&t&&u.lc("context",e.context)},directives:[q.a],styles:[""]}),t})();const T=["content"];function B(t,e){if(1&t&&(u.Rb(0,"option",12),u.Rb(1,"h3"),u.Dc(2),u.Qb(),u.Qb()),2&t){const t=e.$implicit;u.lc("value",t.value),u.yb(2),u.Ec(t.title)}}function j(t,e){if(1&t){const t=u.Sb();u.Rb(0,"div",2),u.Rb(1,"h6",3),u.Dc(2),u.Qb(),u.Rb(3,"p"),u.Dc(4),u.Qb(),u.Rb(5,"div",4),u.Rb(6,"div",5),u.Rb(7,"label",6),u.Dc(8,"Status"),u.Qb(),u.Rb(9,"select",7),u.cc("ngModelChange",(function(e){return u.uc(t),u.ec().selectedStatus=e})),u.Bc(10,B,3,2,"option",8),u.Qb(),u.Qb(),u.Qb(),u.Qb(),u.Rb(11,"div",9),u.Rb(12,"button",10),u.cc("click",(function(){return u.uc(t),u.ec().change()})),u.Dc(13," Change "),u.Qb(),u.Rb(14,"button",11),u.cc("click",(function(){return u.uc(t),u.ec().ok()})),u.Dc(15," Cancel "),u.Qb(),u.Qb()}if(2&t){const t=u.ec();u.yb(2),u.Ec(t.title),u.yb(2),u.Ec(t.description),u.yb(5),u.lc("ngModel",t.selectedStatus),u.yb(1),u.lc("ngForOf",t.statuses),u.yb(2),u.lc("disabled",!t.selectedStatus)}}let G=(()=>{class t{constructor(t,e,r,i,n){this.http=t,this.router=e,this.route=r,this.modalService=i,this.notifier=n,this.statuses=[{title:"pending",value:0},{title:"accepted",value:1},{title:"shipping",value:2},{title:"deliveried",value:3},{title:"rejected",value:4},{title:"canceled",value:5}]}ngAfterViewInit(){const t=this.route.parent.snapshot.data,e=Number.parseInt(this.route.snapshot.params.id,10),r=t.resources.find(t=>t.id===e);if(this.data=r,this.modal=this.modalService.open(this.content,{backdrop:"static",keyboard:!1,size:"md"}),this.modal&&this.data)switch(this.title=`Change order ${this.data.id} status`,this.description="Please be aware that this very important action to take sometimes it is not able to take it back",console.log(this.data.status.title),Number.parseInt(this.data.status.title.toString(),10)){case 0:this.statuses=[{title:"accepted",value:1},{title:"rejected",value:4},{title:"canceled",value:5}];break;case 1:this.statuses=[{title:"shipping",value:2},{title:"deliveried",value:3}];break;case 2:this.statuses=[{title:"deliveried",value:3}];break;case 3:case 4:case 5:this.statuses=[]}else this.ok()}change(){const t={status:this.selectedStatus};this.http.put(f.a.prepareUrl("ordersStatusUrl",{id:this.data.id}),t).subscribe(t=>{if(t)return this.notifier.success("Order status updated successfully"),history.state.runResolvers=!0,void this.ok();this.notifier.error("Somthing went wrong, Failed to delete the resource")})}ok(){this.modal.dismiss(),this.modalService.dismissAll(),setTimeout(()=>{this.router.navigateByUrl("/orders")},125)}}return t.\u0275fac=function(e){return new(e||t)(u.Lb(h.b),u.Lb(o.f),u.Lb(o.a),u.Lb(w.d),u.Lb(E.a))},t.\u0275cmp=u.Fb({type:t,selectors:[["app-order-status-form"]],viewQuery:function(t,e){var r;1&t&&u.Ic(T,!0),2&t&&u.sc(r=u.dc())&&(e.content=r.first)},decls:4,vars:0,consts:[["type","info",3,"close"],["content",""],[1,"modal-body"],[1,"modal-title","mt-1","pt-2"],[1,"form"],[1,"form-group"],[1,"form-group-label"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"btn","btn-sm","btn-rounded","btn-danger",3,"disabled","click"],[1,"btn","btn-sm","btn-rounded","btn-secondary",3,"click"],[3,"value"]],template:function(t,e){1&t&&(u.Rb(0,"ngb-alert",0),u.cc("close",(function(){return e.ok()})),u.Dc(1,"Change Order Status"),u.Qb(),u.Bc(2,j,16,5,"ng-template",null,1,u.Cc))},directives:[w.b,x.q,x.k,x.m,i.m,x.n,x.s],styles:[""]}),t})();var $=r("mFXk");const V=[{path:"",component:m,runGuardsAndResolvers:(t,e)=>{var r;return null!==(r=history.state.runResolvers)&&void 0!==r&&r},resolve:{resources:R,provinces:$.a},children:[{path:"create",component:_},{path:":id/edit",component:_},{path:":id/details",pathMatch:"full",component:U},{path:":id/delete",pathMatch:"full",component:A},{path:":id/status",pathMatch:"full",component:G}]}];let X=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},imports:[[o.i.forChild(V)],o.i]}),t})();var J=r("uP1v"),K=r("RDNO");let z=(()=>{class t{}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)},providers:[R,$.a,{provide:h.a,useClass:K.a,multi:!0}],imports:[[i.c,X,w.e,o.i,x.g,x.p,J.a,n.b]]}),t})()},AMeL:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));var i=r("fXoL"),n=r("tyNb"),o=r("OC8m"),c=r("1kSV"),s=r("ofXK"),a=r("m1XX");const l=["content"];function d(t,e){1&t&&(i.Rb(0,"div"),i.jc(1,0,["[select]","prop.component","[property]","prop","[value]","context.data[prop.key]"]),i.Qb())}function u(t,e){if(1&t&&(i.Rb(0,"div"),i.Rb(1,"h6"),i.Dc(2),i.Qb(),i.Rb(3,"small"),i.Dc(4),i.fc(5,"uppercase"),i.Qb(),i.Qb()),2&t){const t=i.ec().$implicit,e=i.ec(2);i.yb(2),i.Ec(e.context.data.toTitle(t)),i.yb(2),i.Ec(i.gc(5,2,t.title))}}function b(t,e){if(1&t&&(i.Rb(0,"div",14),i.Pb(1,15),i.Bc(2,d,2,0,"div",16),i.Bc(3,u,6,4,"div",17),i.Ob(),i.Qb()),2&t){const t=e.$implicit;i.yb(1),i.lc("ngSwitch",t.type),i.yb(1),i.lc("ngSwitchCase","component")}}function p(t,e){if(1&t&&(i.Rb(0,"button",18),i.Dc(1," Print "),i.Qb()),2&t){const t=i.ec(2);i.lc("useExistingCss",!0)("printTitle",t.context.title)}}function m(t,e){if(1&t){const t=i.Sb();i.Rb(0,"div",2),i.Rb(1,"h6",3),i.Dc(2),i.Qb(),i.Rb(3,"button",4),i.cc("click",(function(){return i.uc(t),i.ec().done()})),i.Rb(4,"span",5),i.Dc(5,"\xd7"),i.Qb(),i.Qb(),i.Qb(),i.Rb(6,"div",6),i.Rb(7,"div",7),i.Bc(8,b,4,2,"div",8),i.Qb(),i.Rb(9,"div",9),i.Rb(10,"div",10),i.Bc(11,p,2,2,"button",11),i.Rb(12,"button",12),i.cc("click",(function(){return i.uc(t),i.ec().done()})),i.Mb(13,"i",13),i.Dc(14," Done "),i.Qb(),i.Qb(),i.Qb(),i.Qb()}if(2&t){const t=i.ec();i.yb(2),i.Ec(t.context.title),i.yb(6),i.lc("ngForOf",t.context.properties),i.yb(3),i.lc("ngIf",t.context.printable)}}const h=["*"];let f=(()=>{class t{constructor(t,e,r){this.router=t,this.notifier=e,this.modalService=r}ngAfterViewInit(){if(!this.context||!this.context.data||!this.context.properties)return this.notifier.warning("Something went wrong, Undefined context","Resource Details"),void this.done();this.modal=this.modalService.open(this.content,{size:"md",backdrop:"static",keyboard:!1}),history.state.print&&setTimeout(()=>{document.getElementById("printer").click()},250)}done(){var t,e;const r=(null===(e=null===(t=this.context)||void 0===t?void 0:t.urls)||void 0===e?void 0:e.tableUrl)||"/users";console.log(r),this.router.navigateByUrl(r).then(t=>{var e;t&&(null===(e=this.modal)||void 0===e||e.dismiss(),this.modalService.dismissAll())})}}return t.\u0275fac=function(e){return new(e||t)(i.Lb(n.f),i.Lb(o.a),i.Lb(c.d))},t.\u0275cmp=i.Fb({type:t,selectors:[["app-resource-details"]],viewQuery:function(t,e){var r;1&t&&i.Ic(l,!0),2&t&&i.sc(r=i.dc())&&(e.content=r.first)},inputs:{context:"context"},ngContentSelectors:h,decls:4,vars:1,consts:[["type","info",3,"close"],["content",""],[1,"modal-header"],[1,"modal-title","pt-1","mt-1"],["type","button",1,"close",2,"border","none","outline","none",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","resource-details",1,"list-group"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","text-right"],["id","printer","class","btn btn-md btn-rounded btn-secondary px-3","printSectionId","resource-details","ngxPrint","",3,"useExistingCss","printTitle",4,"ngIf"],["type","button",1,"btn","btn-md","btn-rounded","btn-primary","px-3",3,"click"],[1,"nc-icon","nc-check-2"],[1,"list-group-item","list-group-item-action"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["id","printer","printSectionId","resource-details","ngxPrint","",1,"btn","btn-md","btn-rounded","btn-secondary","px-3",3,"useExistingCss","printTitle"]],template:function(t,e){1&t&&(i.kc(),i.Rb(0,"ngb-alert",0),i.cc("close",(function(){return e.done()})),i.Dc(1),i.Qb(),i.Bc(2,m,15,3,"ng-template",null,1,i.Cc)),2&t&&(i.yb(1),i.Ec(e.context.title))},directives:[c.b,s.m,s.n,s.p,s.q,s.r,a.a],pipes:[s.x],styles:[""]}),t})()}}]);