(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{yKC2:function(e,t,i){"use strict";i.r(t),i.d(t,"ProductsModule",(function(){return W}));var s=i("ofXK"),o=i("tyNb"),n=i("fXoL"),r=i("Ubi2");const a=["table"];let l=(()=>{class e{constructor(e){this.context={urls:{createUrl:"/products/create",detailsUrl:"/:id"},data:this.data,properties:[{key:"name",title:"Name",type:"string"},{key:"created_at",title:"Created At",type:"datetime"},{key:"updated_at",title:"Updated At",type:"datetime"}],title:"Products"},e.data.subscribe(e=>{this.data=e.products,this.context.data=this.data})}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(o.a))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-index"]],viewQuery:function(e,t){var i;1&e&&n.Fc(a,!0),2&e&&n.pc(i=n.bc())&&(t.table=i.first)},decls:2,vars:1,consts:[[3,"context"],["table",""]],template:function(e,t){1&e&&n.Lb(0,"app-table-view",0,1),2&e&&n.ic("context",t.context)},directives:[r.a],styles:[""]}),e})();var c=i("AytR"),p=i("tk/3");let d=(()=>{class e{constructor(e){this.http=e}resolve(e,t){return this.http.get(`${c.a.apiUrl}/${c.a.productsFetchUrl}`)}}return e.\u0275fac=function(t){return new(t||e)(n.Xb(p.b))},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac}),e})();var u=i("0PJQ"),m=i("3Pt+"),h=i("1kSV");class b{constructor(e,t,i,s,o){this.id=e,this.type=t,this.url=i,this.name=s}}class f{constructor(e){var t;this.rawFile=e;let i=(t=e)&&(t.nodeName||t.prop&&t.attr&&t.find)?e.value:e;this["_createFrom"+("string"==typeof i?"FakePath":"Object")](i)}_createFromFakePath(e){this.lastModifiedDate=void 0,this.size=void 0,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}_createFromObject(e){this.size=e.size,this.type=e.type,this.name=e.name}}class g{constructor(e,t,i){this.url="/",this.headers=[],this.withCredentials=!0,this.formData=[],this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.index=void 0,this.uploader=e,this.some=t,this.options=i,this.file=new f(t),this._file=t,e.options&&(this.method=e.options.method||"POST",this.alias=e.options.itemAlias||"file"),this.url=e.options.url}upload(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,{}),this.uploader._onErrorItem(this,"",0,{})}}cancel(){this.uploader.cancelItem(this)}remove(){this.uploader.removeFromQueue(this)}onBeforeUpload(){}onBuildForm(e){return{form:e}}onProgress(e){return{progress:e}}onSuccess(e,t,i){return{response:e,status:t,headers:i}}onError(e,t,i){return{response:e,status:t,headers:i}}onCancel(e,t,i){return{response:e,status:t,headers:i}}onComplete(e,t,i){return{response:e,status:t,headers:i}}_onBeforeUpload(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}_onBuildForm(e){this.onBuildForm(e)}_onProgress(e){this.progress=e,this.onProgress(e)}_onSuccess(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=void 0,this.onSuccess(e,t,i)}_onError(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=void 0,this.onError(e,t,i)}_onCancel(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=void 0,this.onCancel(e,t,i)}_onComplete(e,t,i){this.onComplete(e,t,i),this.uploader.options.removeAfterUpload&&this.remove()}_prepareToUploading(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}}let v=(()=>{class e{static getMimeClass(e){let t="application";return-1!==this.mime_psd.indexOf(e.type)||e.type.match("image.*")?t="image":e.type.match("video.*")?t="video":e.type.match("audio.*")?t="audio":"application/pdf"===e.type?t="pdf":-1!==this.mime_compress.indexOf(e.type)?t="compress":-1!==this.mime_doc.indexOf(e.type)?t="doc":-1!==this.mime_xsl.indexOf(e.type)?t="xls":-1!==this.mime_ppt.indexOf(e.type)&&(t="ppt"),"application"===t&&(t=this.fileTypeDetection(e.name)),t}static fileTypeDetection(e){let t={jpg:"image",jpeg:"image",tif:"image",psd:"image",bmp:"image",png:"image",nef:"image",tiff:"image",cr2:"image",dwg:"image",cdr:"image",ai:"image",indd:"image",pin:"image",cdp:"image",skp:"image",stp:"image","3dm":"image",mp3:"audio",wav:"audio",wma:"audio",mod:"audio",m4a:"audio",compress:"compress",zip:"compress",rar:"compress","7z":"compress",lz:"compress",z01:"compress",bz2:"compress",gz:"compress",pdf:"pdf",xls:"xls",xlsx:"xls",ods:"xls",mp4:"video",avi:"video",wmv:"video",mpg:"video",mts:"video",flv:"video","3gp":"video",vob:"video",m4v:"video",mpeg:"video",m2ts:"video",mov:"video",doc:"doc",docx:"doc",eps:"doc",txt:"doc",odt:"doc",rtf:"doc",ppt:"ppt",pptx:"ppt",pps:"ppt",ppsx:"ppt",odp:"ppt"},i=e.split(".");if(i.length<2)return"application";let s=i[i.length-1].toLowerCase();return void 0===t[s]?"application":t[s]}}return e.mime_doc=["application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],e.mime_xsl=["application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],e.mime_ppt=["application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],e.mime_psd=["image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd"],e.mime_compress=["application/x-gtar","application/x-gcompress","application/compress","application/x-tar","application/x-rar-compressed","application/octet-stream","application/x-zip-compressed","application/zip-compressed","application/x-7z-compressed","application/gzip","application/x-bzip2"],e})();class O{constructor(e){this.isUploading=!1,this.queue=[],this.progress=0,this._nextIndex=0,this.options={autoUpload:!1,isHTML5:!0,filters:[],removeAfterUpload:!1,disableMultipart:!1,formatDataFunction:e=>e._file,formatDataFunctionIsAsync:!1},this.setOptions(e),this.response=new n.n}setOptions(e){this.options=Object.assign(this.options,e),this.authToken=this.options.authToken,this.authTokenHeader=this.options.authTokenHeader||"Authorization",this.autoUpload=this.options.autoUpload,this.options.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.options.maxFileSize&&this.options.filters.unshift({name:"fileSize",fn:this._fileSizeFilter}),this.options.allowedFileType&&this.options.filters.unshift({name:"fileType",fn:this._fileTypeFilter}),this.options.allowedMimeType&&this.options.filters.unshift({name:"mimeType",fn:this._mimeTypeFilter});for(let t=0;t<this.queue.length;t++)this.queue[t].url=this.options.url}addToQueue(e,t,i){let s=[];for(let a of e)s.push(a);let o=this._getFilters(i),n=this.queue.length,r=[];s.map(e=>{t||(t=this.options);let i=new f(e);if(this._isValidFile(i,o,t)){let i=new g(this,e,t);r.push(i),this.queue.push(i),this._onAfterAddingFile(i)}else this._onWhenAddingFileFailed(i,o[this._failFilterIndex],t)}),this.queue.length!==n&&(this._onAfterAddingAll(r),this.progress=this._getTotalProgress()),this._render(),this.options.autoUpload&&this.uploadAll()}removeFromQueue(e){let t=this.getIndexOfItem(e),i=this.queue[t];i.isUploading&&i.cancel(),this.queue.splice(t,1),this.progress=this._getTotalProgress()}clearQueue(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}uploadItem(e){let t=this.getIndexOfItem(e),i=this.queue[t],s=this.options.isHTML5?"_xhrTransport":"_iframeTransport";i._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[s](i))}cancelItem(e){let t=this.getIndexOfItem(e),i=this.queue[t];i&&i.isUploading&&(this.options.isHTML5?i._xhr:i._form).abort()}uploadAll(){let e=this.getNotUploadedItems().filter(e=>!e.isUploading);e.length&&(e.map(e=>e._prepareToUploading()),e[0].upload())}cancelAll(){this.getNotUploadedItems().map(e=>e.cancel())}isFile(e){return function(e){return File&&e instanceof File}(e)}isFileLikeObject(e){return e instanceof f}getIndexOfItem(e){return"number"==typeof e?e:this.queue.indexOf(e)}getNotUploadedItems(){return this.queue.filter(e=>!e.isUploaded)}getReadyItems(){return this.queue.filter(e=>e.isReady&&!e.isUploading).sort((e,t)=>e.index-t.index)}destroy(){}onAfterAddingAll(e){return{fileItems:e}}onBuildItemForm(e,t){return{fileItem:e,form:t}}onAfterAddingFile(e){return{fileItem:e}}onWhenAddingFileFailed(e,t,i){return{item:e,filter:t,options:i}}onBeforeUploadItem(e){return{fileItem:e}}onProgressItem(e,t){return{fileItem:e,progress:t}}onProgressAll(e){return{progress:e}}onSuccessItem(e,t,i,s){return{item:e,response:t,status:i,headers:s}}onErrorItem(e,t,i,s){return{item:e,response:t,status:i,headers:s}}onCancelItem(e,t,i,s){return{item:e,response:t,status:i,headers:s}}onCompleteItem(e,t,i,s){return{item:e,response:t,status:i,headers:s}}onCompleteAll(){}_mimeTypeFilter(e){return!(this.options.allowedMimeType&&-1===this.options.allowedMimeType.indexOf(e.type))}_fileSizeFilter(e){return!(this.options.maxFileSize&&e.size>this.options.maxFileSize)}_fileTypeFilter(e){return!(this.options.allowedFileType&&-1===this.options.allowedFileType.indexOf(v.getMimeClass(e)))}_onErrorItem(e,t,i,s){e._onError(t,i,s),this.onErrorItem(e,t,i,s)}_onCompleteItem(e,t,i,s){e._onComplete(t,i,s),this.onCompleteItem(e,t,i,s);let o=this.getReadyItems()[0];this.isUploading=!1,o?o.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())}_headersGetter(e){return t=>t?e[t.toLowerCase()]||void 0:e}_xhrTransport(e){let t,i=this,s=e._xhr=new XMLHttpRequest;if(this._onBeforeUploadItem(e),"number"!=typeof e._file.size)throw new TypeError("The file specified is no longer valid");if(this.options.disableMultipart)t=this.options.formatDataFunction(e);else{t=new FormData,this._onBuildItemForm(e,t);const i=()=>t.append(e.alias,e._file,e.file.name);this.options.parametersBeforeFiles||i(),void 0!==this.options.additionalParameter&&Object.keys(this.options.additionalParameter).forEach(i=>{let s=this.options.additionalParameter[i];"string"==typeof s&&s.indexOf("{{file_name}}")>=0&&(s=s.replace("{{file_name}}",e.file.name)),t.append(i,s)}),this.options.parametersBeforeFiles&&i()}if(s.upload.onprogress=t=>{let i=Math.round(t.lengthComputable?100*t.loaded/t.total:0);this._onProgressItem(e,i)},s.onload=()=>{let t=this._parseHeaders(s.getAllResponseHeaders()),i=this._transformResponse(s.response,t);this["_on"+(this._isSuccessCode(s.status)?"Success":"Error")+"Item"](e,i,s.status,t),this._onCompleteItem(e,i,s.status,t)},s.onerror=()=>{let t=this._parseHeaders(s.getAllResponseHeaders()),i=this._transformResponse(s.response,t);this._onErrorItem(e,i,s.status,t),this._onCompleteItem(e,i,s.status,t)},s.onabort=()=>{let t=this._parseHeaders(s.getAllResponseHeaders()),i=this._transformResponse(s.response,t);this._onCancelItem(e,i,s.status,t),this._onCompleteItem(e,i,s.status,t)},s.open(e.method,e.url,!0),s.withCredentials=e.withCredentials,this.options.headers)for(let o of this.options.headers)s.setRequestHeader(o.name,o.value);if(e.headers.length)for(let o of e.headers)s.setRequestHeader(o.name,o.value);this.authToken&&s.setRequestHeader(this.authTokenHeader,this.authToken),s.onreadystatechange=function(){s.readyState==XMLHttpRequest.DONE&&i.response.emit(s.responseText)},this.options.formatDataFunctionIsAsync?t.then(e=>s.send(JSON.stringify(e))):s.send(t),this._render()}_getTotalProgress(e=0){if(this.options.removeAfterUpload)return e;let t=this.getNotUploadedItems().length,i=100/this.queue.length;return Math.round((t?this.queue.length-t:this.queue.length)*i+e*i/100)}_getFilters(e){if(!e)return this.options.filters;if(Array.isArray(e))return e;if("string"==typeof e){let t=e.match(/[^\s,]+/g);return this.options.filters.filter(e=>-1!==t.indexOf(e.name))}return this.options.filters}_render(){}_queueLimitFilter(){return void 0===this.options.queueLimit||this.queue.length<this.options.queueLimit}_isValidFile(e,t,i){return this._failFilterIndex=-1,!t.length||t.every(t=>(this._failFilterIndex++,t.fn.call(this,e,i)))}_isSuccessCode(e){return e>=200&&e<300||304===e}_transformResponse(e,t){return e}_parseHeaders(e){let t,i,s,o={};return e?(e.split("\n").map(e=>{s=e.indexOf(":"),t=e.slice(0,s).trim().toLowerCase(),i=e.slice(s+1).trim(),t&&(o[t]=o[t]?o[t]+", "+i:i)}),o):o}_onWhenAddingFileFailed(e,t,i){this.onWhenAddingFileFailed(e,t,i)}_onAfterAddingFile(e){this.onAfterAddingFile(e)}_onAfterAddingAll(e){this.onAfterAddingAll(e)}_onBeforeUploadItem(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}_onBuildItemForm(e,t){e._onBuildForm(t),this.onBuildItemForm(e,t)}_onProgressItem(e,t){let i=this._getTotalProgress(t);this.progress=i,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(i),this._render()}_onSuccessItem(e,t,i,s){e._onSuccess(t,i,s),this.onSuccessItem(e,t,i,s)}_onCancelItem(e,t,i,s){e._onCancel(t,i,s),this.onCancelItem(e,t,i,s)}}let y=(()=>{class e{constructor(e){this.onFileSelected=new n.n,this.element=e}getOptions(){return this.uploader.options}getFilters(){return{}}isEmptyAfterSelection(){return!!this.element.nativeElement.attributes.multiple}onChange(){let e=this.element.nativeElement.files,t=this.getOptions(),i=this.getFilters();this.uploader.addToQueue(e,t,i),this.onFileSelected.emit(e),this.isEmptyAfterSelection()&&(this.element.nativeElement.value="")}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(n.l))},e.\u0275dir=n.Fb({type:e,selectors:[["","ng2FileSelect",""]],hostBindings:function(e,t){1&e&&n.ac("change",(function(){return t.onChange()}))},inputs:{uploader:"uploader"},outputs:{onFileSelected:"onFileSelected"}}),e})(),x=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(t){return new(t||e)},imports:[[s.b]]}),e})();var P=i("lGQG"),_=i("OC8m");function w(e,t){if(1&e&&(n.Pb(0,"td"),n.Ac(1),n.dc(2,"number"),n.Ob()),2&e){const e=n.cc().$implicit;n.xb(1),n.Cc(" ",n.fc(2,1,(null==e||null==e.file?null:e.file.size)/1024/1024,".2")," MB ")}}function I(e,t){if(1&e&&(n.Pb(0,"tr"),n.Pb(1,"td"),n.Pb(2,"strong"),n.Ac(3),n.Ob(),n.Ob(),n.yc(4,w,3,4,"td",20),n.Ob()),2&e){const e=t.$implicit,i=n.cc(2);n.xb(3),n.Bc(null==e||null==e.file?null:e.file.name),n.xb(1),n.ic("ngIf",i.uploader.options.isHTML5)}}function F(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",0),n.Pb(1,"div",7),n.Pb(2,"div",8),n.Pb(3,"label",9),n.Ac(4,"Upload queue"),n.Ob(),n.Pb(5,"div",10),n.Pb(6,"div",11),n.Pb(7,"table",12),n.Pb(8,"thead"),n.Pb(9,"tr"),n.Pb(10,"th",13),n.Ac(11),n.Ob(),n.Ob(),n.Pb(12,"tr"),n.Pb(13,"th"),n.Ac(14,"Name"),n.Ob(),n.Pb(15,"th"),n.Ac(16,"Size"),n.Ob(),n.Ob(),n.Ob(),n.Pb(17,"tbody"),n.yc(18,I,5,2,"tr",14),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(19,"div",8),n.Pb(20,"label",15),n.Ac(21," Queue progress "),n.Ob(),n.Pb(22,"div",10),n.Lb(23,"ngb-progressbar",16),n.Ob(),n.Ob(),n.Pb(24,"div",8),n.Pb(25,"button",17),n.ac("click",(function(){return n.rc(e),n.cc().uploader.uploadAll()})),n.Ac(26," Upload "),n.Ob(),n.Pb(27,"button",18),n.ac("click",(function(){return n.rc(e),n.cc().uploader.cancelAll()})),n.Ac(28," Cancel "),n.Ob(),n.Pb(29,"button",19),n.ac("click",(function(){return n.rc(e),n.cc().uploader.clearQueue()})),n.Ac(30," Remove "),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.cc();n.xb(11),n.Cc("Queue length: ",null==e.uploader||null==e.uploader.queue?null:e.uploader.queue.length,""),n.xb(7),n.ic("ngForOf",e.uploader.queue),n.xb(5),n.ic("value",e.uploader.progress),n.xb(2),n.ic("disabled",!e.uploader.getNotUploadedItems().length),n.xb(2),n.ic("disabled",!e.uploader.isUploading),n.xb(2),n.ic("disabled",!e.uploader.queue.length)}}let A=(()=>{class e{constructor(e,t){this.auth=e,this.notifier=t,this.valueChange=new n.n}get value(){return this.attachments?this.attachments.map(e=>Number.parseInt(e.id.toString(),10)):null}ngOnInit(){this.attachments=[],this.initializeUploader()}initializeUploader(){this.uploader=new O({url:c.a.prepareUrl("attachmentUploadUrl"),authToken:"Bearer "+this.auth.appUser.token,allowedFileType:["image","video"],autoUpload:!1,removeAfterUpload:!0,maxFileSize:10485760}),this.hasBaseDropZoneOver=!1,this.hasAnotherDropZoneOver=!1,this.uploader.onBuildItemForm=(e,t)=>{e.withCredentials=!1,t.append("type",e.file.type.split("/")[0])},this.uploader.onSuccessItem=(e,t,i,s)=>{const o=JSON.parse(t),n=new b(o.id,o.type,o.url,o.name);this.attachments.push(n),this.notifier.success("Attachment uploaded successfully!","Uploader"),this.valueChange.next(this.value)},this.uploader.onErrorItem=(e,t)=>{this.notifier.error("Failed to upload attachment","Uploader")}}fileOverBase(e){this.hasBaseDropZoneOver=e}fileOverAnother(e){this.hasAnotherDropZoneOver=e}delete(e){this.attachments.splice(this.attachments.indexOf(e),1),this.valueChange.next(this.value)}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(P.a),n.Kb(_.a))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-attachments-uploader"]],outputs:{valueChange:"valueChange"},decls:10,vars:2,consts:[[1,"row"],[1,"col-md-12"],[1,"btn","btn-md","btn-pill","btn-warning","px-3",3,"click"],[1,"folder","outline","icon"],["hidden","","type","file","ng2FileSelect","","multiple","",3,"uploader"],["fileChoser",""],["class","row",4,"ngIf"],[1,"col-12"],[1,"form-group"],[1,"h5"],[1,"form-control"],[1,"table-responsive","overflow-hidden"],[1,"table","table-stripped"],["colspan","5"],[4,"ngFor","ngForOf"],[1,"h6"],[3,"value"],[1,"btn","btn-sm","btn-success",3,"disabled","click"],[1,"btn","btn-sm","btn-warning",3,"disabled","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",0),n.Pb(1,"div",1),n.Pb(2,"button",2),n.ac("click",(function(){return n.rc(e),n.qc(8).click()})),n.Lb(3,"i",3),n.Ac(4," Pick Files "),n.Ob(),n.Pb(5,"div"),n.Ac(6,"\xa0"),n.Ob(),n.Lb(7,"input",4,5),n.Ob(),n.Ob(),n.yc(9,F,31,6,"div",6)}2&e&&(n.xb(7),n.ic("uploader",t.uploader),n.xb(2),n.ic("ngIf",(null==t.uploader||null==t.uploader.queue?null:t.uploader.queue.length)>0))},directives:[y,s.k,s.j,h.g],pipes:[s.d],styles:[""]}),e})();const C=["content"];function U(e,t){if(1&e&&(n.Pb(0,"option",23),n.Ac(1),n.Ob()),2&e){const e=t.$implicit;n.ic("value",e.id),n.xb(1),n.Bc(e.name)}}function k(e,t){if(1&e&&(n.Pb(0,"option",23),n.Ac(1),n.Ob()),2&e){const e=t.$implicit;n.ic("value",e.id),n.xb(1),n.Bc(e.name)}}function q(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",2),n.Pb(1,"h6",3),n.Ac(2),n.Ob(),n.Pb(3,"button",4),n.ac("click",(function(){return n.rc(e),n.cc().ok()})),n.Pb(4,"span",5),n.Ac(5,"\xd7"),n.Ob(),n.Ob(),n.Ob(),n.Pb(6,"div",6),n.Pb(7,"form",7),n.Pb(8,"div",8),n.Pb(9,"div",9),n.Pb(10,"div",10),n.Pb(11,"label"),n.Ac(12,"Name"),n.Ob(),n.Lb(13,"input",11),n.Ob(),n.Ob(),n.Ob(),n.Pb(14,"div",8),n.Pb(15,"div",12),n.Pb(16,"div",10),n.Pb(17,"label"),n.Ac(18,"Category"),n.Ob(),n.Pb(19,"select",13),n.yc(20,U,2,2,"option",14),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(21,"div",8),n.Pb(22,"div",12),n.Pb(23,"div",10),n.Pb(24,"label"),n.Ac(25,"Brand"),n.Ob(),n.Pb(26,"select",15),n.yc(27,k,2,2,"option",14),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(28,"div",8),n.Pb(29,"div",9),n.Pb(30,"div",10),n.Pb(31,"label"),n.Ac(32,"Price"),n.Ob(),n.Lb(33,"input",16),n.Ob(),n.Ob(),n.Ob(),n.Pb(34,"div",8),n.Pb(35,"div",12),n.Pb(36,"div",10),n.Lb(37,"input",17),n.Pb(38,"label",18),n.Ac(39,"Is Main?"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(40,"div",8),n.Pb(41,"div",12),n.Pb(42,"div",10),n.Pb(43,"label"),n.Ac(44,"Attachments"),n.Ob(),n.Lb(45,"input",19),n.Pb(46,"p"),n.Ac(47),n.Ob(),n.Pb(48,"app-attachments-uploader",20),n.ac("valueChange",(function(t){return n.rc(e),n.cc().onAttachmentsChange(t)})),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(49,"div",8),n.Pb(50,"div",21),n.Pb(51,"button",22),n.ac("click",(function(){return n.rc(e),n.cc().submit()})),n.Ac(52," Submit "),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.cc();n.xb(2),n.Bc(e.title),n.xb(5),n.ic("formGroup",e.formGroup),n.xb(13),n.ic("ngForOf",e.categories),n.xb(7),n.ic("ngForOf",e.brands),n.xb(20),n.Bc(e.formGroup.value.attachments.length),n.xb(4),n.ic("disabled",!e.formGroup.valid)}}let S=(()=>{class e extends u.b{constructor(e,t,i,s){super(e,t,i,s),e.get(c.a.prepareUrl("brandsFetchUrl")).toPromise().then(e=>this.brands=e),e.get(c.a.prepareUrl("categoriesFetchUrl")).toPromise().then(e=>this.categories=e),this.formGroup=new m.e({name:new m.c(null,m.q.required),brand_id:new m.c(null,m.q.required),category_id:new m.c(null,m.q.required),price:new m.c(null,m.q.required),is_main:new m.c(!1,m.q.required),attachments:new m.c(!1,m.q.required)})}openModal(){return this.service.open(this.content,{backdrop:"static"})}postUrl(){return"productsCreateUrl"}putUrl(){return"productsUpdateUrl"}initData(){super.initData(),history.state.resource&&this.formGroup.patchValue({price:history.state.resource.price.value})}onAttachmentsChange(e){this.formGroup.patchValue({attachments:e})}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(p.b),n.Kb(o.a),n.Kb(o.b),n.Kb(h.d))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-product-form"]],viewQuery:function(e,t){var i;1&e&&n.Fc(C,!0),2&e&&n.pc(i=n.bc())&&(t.content=i.first)},features:[n.ub],decls:4,vars:1,consts:[["type","info",3,"close"],["content",""],[1,"modal-header"],[1,"modal-title","pt-1","mt-1"],["type","button",1,"close",2,"border","none","outline","none",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"row"],[1,"col-12","px-3"],[1,"form-group"],["type","text","placeholder","Name","formControlName","name","autocomplete","off",1,"form-control"],[1,"col-md-12","px-3"],["placeholder","Category","formControlName","category_id",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Brand","formControlName","brand_id",1,"form-control"],["type","number","placeholder","Price","formControlName","price","autocomplete","off",1,"form-control"],["type","checkbox","placeholder","Is Main?","formControlName","is_main",1,""],[1,"mx-1","mb-1"],["type","hidden","formControlName","attachments"],[3,"valueChange"],[1,"update","ml-auto","mr-auto"],["type","submit",1,"btn","btn-primary","btn-round",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(n.Pb(0,"ngb-alert",0),n.ac("close",(function(){return t.ok()})),n.Ac(1),n.Ob(),n.yc(2,q,53,6,"ng-template",null,1,n.zc)),2&e&&(n.xb(1),n.Bc(t.message))},directives:[h.b,m.s,m.k,m.f,m.b,m.j,m.d,m.p,s.j,m.n,m.a,A,m.m,m.r],styles:[""]}),e})();function T(e,t){if(1&e&&n.Lb(0,"img",7),2&e){const e=n.cc(2).$implicit;n.ic("src",e.url,n.tc)("alt",e.name)}}function E(e,t){if(1&e&&(n.Pb(0,"video",8),n.Lb(1,"source",9),n.Ob()),2&e){const e=n.cc(2).$implicit;n.xb(1),n.ic("src",e.url,n.tc)}}function B(e,t){if(1&e&&(n.Pb(0,"div",4),n.yc(1,T,1,2,"img",5),n.yc(2,E,2,1,"video",6),n.Ob()),2&e){const e=n.cc().$implicit;n.xb(1),n.ic("ngIf",0===e.type),n.xb(1),n.ic("ngIf",1===e.type)}}function z(e,t){1&e&&n.yc(0,B,3,2,"ng-template",3)}function M(e,t){if(1&e&&(n.Pb(0,"ngb-carousel"),n.yc(1,z,1,0,void 0,2),n.Ob()),2&e){const e=n.cc();n.xb(1),n.ic("ngForOf",e.attachments)}}function L(e,t){1&e&&(n.Pb(0,"ngb-alert",10),n.Pb(1,"strong"),n.Ac(2,"Problem!"),n.Ob(),n.Ac(3," Something went wrong or Your attachments are empty "),n.Ob()),2&e&&n.ic("dismissible",!1)}let R=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Eb({type:e,selectors:[["app-attachments-viewer"]],inputs:{attachments:"attachments"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["message",""],[4,"ngFor","ngForOf"],["ngbSlide",""],[1,"picsum-img-wrapper"],[3,"src","alt",4,"ngIf"],["controls","",4,"ngIf"],[3,"src","alt"],["controls",""],[3,"src"],[3,"dismissible"]],template:function(e,t){if(1&e&&(n.yc(0,M,2,1,"ngb-carousel",0),n.yc(1,L,4,1,"ng-template",null,1,n.zc)),2&e){const e=n.qc(2);n.ic("ngIf",t.attachments)("ngIfElse",e)}},directives:[s.k,h.c,s.j,h.h,h.b],styles:["[_nghost-%COMP%]   ngb-carousel[_ngcontent-%COMP%]{width:100%;outline:none}[_nghost-%COMP%]   .picsum-img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .picsum-img-wrapper[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}"]}),e})();const H=["content"];function N(e,t){if(1&e&&(n.Pb(0,"div",11),n.Pb(1,"h6"),n.Ac(2),n.Ob(),n.Pb(3,"small"),n.Ac(4),n.dc(5,"uppercase"),n.Ob(),n.Ob()),2&e){const e=t.$implicit,i=n.cc(2);n.xb(2),n.Bc(i.product[e]),n.xb(2),n.Bc(n.ec(5,2,e))}}function D(e,t){if(1&e&&n.Lb(0,"app-attachments-viewer",12),2&e){const e=n.cc(2);n.ic("attachments",null==e.product?null:e.product.attachments)}}function j(e,t){if(1&e){const e=n.Qb();n.Pb(0,"div",2),n.Pb(1,"h6",3),n.Ac(2),n.Ob(),n.Ob(),n.Pb(3,"div",4),n.Pb(4,"div",5),n.yc(5,N,6,4,"div",6),n.yc(6,D,1,1,"app-attachments-viewer",7),n.Ob(),n.Pb(7,"div",8),n.Pb(8,"div",9),n.Pb(9,"button",10),n.ac("click",(function(){return n.rc(e),n.cc().ok()})),n.Ac(10,"Ok"),n.Ob(),n.Ob(),n.Ob(),n.Ob()}if(2&e){const e=n.cc();n.xb(2),n.Bc(e.message),n.xb(3),n.ic("ngForOf",e.attributes),n.xb(1),n.ic("ngIf",e.product&&e.product.attachments&&e.product.attachments.length>0)}}let Q=(()=>{class e{constructor(e,t){this.modalService=e,this.router=t}ngOnInit(){this.product=history.state.resource,this.product?(this.attributes=Object.keys(this.product),this.message="Details of product: "+this.product.name):this.ok()}ngAfterViewInit(){this.product&&(this.modal=this.modalService.open(this.content,{size:"md",backdrop:"static"}))}ok(){this.modal?this.modal.dismiss():this.modalService.dismissAll(),this.router.navigateByUrl("/products")}}return e.\u0275fac=function(t){return new(t||e)(n.Kb(h.d),n.Kb(o.b))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-product-details"]],viewQuery:function(e,t){var i;1&e&&n.Fc(H,!0),2&e&&n.pc(i=n.bc())&&(t.content=i.first)},decls:4,vars:1,consts:[["type","info",3,"close"],["content",""],[1,"modal-header"],[1,"modal-title","pt-1","mt-1"],[1,"modal-body"],[1,"list-group"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],["class","list-group-item m-0 p-0",3,"attachments",4,"ngIf"],[1,"row"],[1,"col-12","text-align"],[1,"btn","btn-primary","btn-rounded",3,"click"],[1,"list-group-item","list-group-item-action"],[1,"list-group-item","m-0","p-0",3,"attachments"]],template:function(e,t){1&e&&(n.Pb(0,"ngb-alert",0),n.ac("close",(function(){return t.ok()})),n.Ac(1),n.Ob(),n.yc(2,j,11,3,"ng-template",null,1,n.zc)),2&e&&(n.xb(1),n.Bc(t.message))},directives:[h.b,s.j,s.k,R],pipes:[s.p],styles:[""]}),e})();var G=i("w+MF");const K=[{path:"",component:l,resolve:{products:d},children:[{path:"create",component:S},{path:":id/edit",component:S},{path:":id/details",pathMatch:"full",component:Q},{path:":id/delete",pathMatch:"full",component:(()=>{class e{constructor(){}ngOnInit(){this.context={deleteUrl:"productsDeleteUrl",data:history.state.resource,title:"Delete Product Resource!",description:"Are you sure to delete this product?"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Eb({type:e,selectors:[["app-product-delete"]],decls:1,vars:1,consts:[[3,"context"]],template:function(e,t){1&e&&n.Lb(0,"app-resource-delete",0),2&e&&n.ic("context",t.context)},directives:[G.a],styles:[""]}),e})()}]}];let $=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(t){return new(t||e)},imports:[[o.e.forChild(K)],o.e]}),e})();var V=i("uP1v"),J=i("RDNO");let X=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(t){return new(t||e)},imports:[[s.b,h.e,m.o,x]]}),e})(),W=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(t){return new(t||e)},providers:[d,{provide:p.a,useClass:J.a,multi:!0}],imports:[[s.b,$,h.e,o.e,m.o,V.a,X]]}),e})()}}]);