{"version":3,"sources":["./src/app/dashboard/brands/index/index.component.ts","./src/app/dashboard/brands/index/index.component.html","./src/app/models/brand.model.ts","./src/app/dashboard/brands/brands.resolver.ts","./src/app/dashboard/brands/brand-delete/brand-delete.component.ts","./src/app/dashboard/brands/brand-delete/brand-delete.component.html","./src/app/dashboard/brands/brand-details/brand-details.component.ts","./src/app/dashboard/brands/brand-details/brand-details.component.html","./src/app/dashboard/brands/brand-form/brand-form.component.html","./src/app/dashboard/brands/brand-form/brand-form.component.ts","./src/app/dashboard/brands/brands-routing.module.ts","./src/app/dashboard/brands/brands.module.ts"],"names":["IndexComponent","route","context","urls","createUrl","detailsUrl","data","this","properties","key","title","type","subscribe","brands","id","name","description","created_at","updated_at","attachment_id","attachment","super","BrandsResolver","http","element","url","state","get","environment","apiUrl","brandsFetchUrl","pipe","map","e","Json2Brand","BrandDeleteComponent","deleteUrl","history","resource","BrandDetailsComponent","brand","tableUrl","component","BrandFormComponent","router","service","formGroup","required","open","content","backdrop","ids","entities","length","patchValue","ok","routes","path","runGuardsAndResolvers","resolve","children","pathMatch","BrandsRoutingModule","forChild","BrandsModule","provide","useClass","multi"],"mappings":"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","file":"10.141e6501b1986ce1fa58.js","sourcesContent":["import { Component, ViewChild } from '@angular/core';\nimport { Brand } from 'src/app/models/brand.model';\nimport { TableViewComponent } from 'src/app/shared/dashboard-resource/table-view/table-view.component';\nimport { ActivatedRoute } from '@angular/router';\nimport { ITableContext } from 'src/app/shared/dashboard-resource/table-view/table.context';\n\n@Component({\n  selector: 'app-index',\n  templateUrl: './index.component.html',\n  styleUrls: ['./index.component.scss']\n})\nexport class IndexComponent {\n  data: Brand[];\n  context: ITableContext<Brand> = {\n    urls: {\n      createUrl: 'create',\n      detailsUrl: ':id'\n    },\n    data: this.data,\n    properties: [\n      {\n        key: 'name',\n        title: 'Name',\n        type: 'string'\n      },\n      {\n        key: 'description',\n        title: 'Description',\n        type: 'string'\n      },\n      {\n        key: 'created_at',\n        title: 'Created At',\n        type: 'datetime'\n      },\n      {\n        key: 'updated_at',\n        title: 'Updated At',\n        type: 'datetime'\n      },\n    ],\n    title: 'Brands'\n  };\n  @ViewChild('table') table: TableViewComponent<Brand>;\n\n  constructor(route: ActivatedRoute) {\n    // console.log(this.context);\n    route.data.subscribe(data => {\n      this.data = data.brands;\n      this.context.data = this.data;\n    });\n  }\n}\n","<app-table-view [context]=\"context\" #table></app-table-view>","import { Resource } from '../shared/dashboard-resource/resource.model';\r\nimport { Attachment } from './attachment.model';\r\n\r\nexport class Brand extends Resource {\r\n    constructor(\r\n        public id: string,\r\n        public name: string,\r\n        public description: string,\r\n        public created_at: Date,\r\n        public updated_at: Date,\r\n        public attachment_id: string,\r\n        public attachment: Attachment) {\r\n        super(id);\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Resolve, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { environment } from '../../../environments/environment';\r\nimport { Brand } from '../../models/brand.model';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { Attachment } from 'src/app/models/attachment.model';\r\n\r\n@Injectable()\r\nexport class BrandsResolver implements Resolve<Brand[]> {\r\n    public static Json2Brand(element: any): Brand {\r\n        if (!element)\r\n        {\r\n            return null;\r\n        }\r\n        let attachment: Attachment = null;\r\n        if (element.attachment)\r\n        {\r\n            attachment = new Attachment(\r\n                element.attachment?.id,\r\n                element.attachment?.type, element?.attachment.url, element?.attachment.name);\r\n        }\r\n        return new Brand(element.id, element.name,\r\n            element.description, element.created_at, element.updated_at, element.attachment_id, attachment);\r\n    }\r\n\r\n    constructor(private http: HttpClient) {\r\n    }\r\n\r\n    resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<Brand[]> {\r\n        return this.http.get<any[]>(`${ environment.apiUrl }/${ environment.brandsFetchUrl }`)\r\n            .pipe(map(data => data.map(e => BrandsResolver.Json2Brand(e))));\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\nimport { Brand } from 'src/app/models/brand.model';\nimport { ResourceDeleteContext } from 'src/app/shared/dashboard-resource/resource-delete/resource-delete.component';\n\n@Component({\n  selector: 'app-brand-delete',\n  templateUrl: './brand-delete.component.html',\n  styleUrls: ['./brand-delete.component.scss']\n})\nexport class BrandDeleteComponent implements OnInit {\n  context: ResourceDeleteContext<Brand>;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.context = {\n      deleteUrl: 'brandsDeleteUrl',\n      data: history.state.resource,\n      title: 'Delete Brand Resource!',\n      description: 'Are you sure to delete this brand?'\n    };\n  }\n\n}\n","<app-resource-delete [context]=\"context\"></app-resource-delete>","import { Component, OnInit, Type } from '@angular/core';\nimport { Brand } from 'src/app/models/brand.model';\nimport { IResourceDetailsContext } from 'src/app/shared/dashboard-resource/resource-details/resource-details.context';\nimport { BrandsResolver } from '../brands.resolver';\nimport { AttachmentsViewerComponent } from 'src/app/shared/attachments/attachments-viewer/attachments-viewer.component';\n\n@Component({\n  selector: 'app-brand-details',\n  templateUrl: './brand-details.component.html',\n  styleUrls: ['./brand-details.component.scss']\n})\nexport class BrandDetailsComponent implements OnInit {\n  public context: IResourceDetailsContext<Brand>;\n\n  ngOnInit(): void {\n    const brand: Brand = BrandsResolver.Json2Brand(history.state.resource);\n\n    this.context = {\n      urls: {\n        tableUrl: '/brands',\n      },\n      data: brand,\n      properties: [\n        {\n          key: 'name',\n          title: 'Name',\n          type: 'string'\n        },\n        {\n          key: 'description',\n          title: 'Description',\n          type: 'string'\n        },\n        {\n          key: 'created_at',\n          title: 'Created At',\n          type: 'datetime'\n        },\n        {\n          key: 'updated_at',\n          title: 'Updated At',\n          type: 'datetime'\n        },\n        {\n          key: 'attachment',\n          title: 'Attachment',\n          type: 'component',\n          component: 'app-attachments-viewer'\n        },\n      ],\n      title: `Details of brand ${ brand?.name }`\n    };\n  }\n}\n","<app-resource-details [context]=\"context\">\r\n  <app-attachments-viewer [attachments]=\"[context?.data?.attachment]\"></app-attachments-viewer>\r\n</app-resource-details>","<ngb-alert type=\"info\" (close)=\"ok()\">{{ message }}</ngb-alert>\n\n<ng-template #content>\n  <div class=\"modal-header\">\n    <h6 class=\"modal-title pt-1 mt-1\">{{ title }}</h6>\n    <button type=\"button\" class=\"close\" style=\"border: none; outline: none;\" (click)=\"ok()\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <form [formGroup]=\"formGroup\">\n      <div class=\"row\">\n        <div class=\"col-12 px-3\">\n          <div class=\"form-group\">\n            <label>Name</label>\n            <input type=\"text\" class=\"form-control\" placeholder=\"Name\" formControlName=\"name\" autocomplete=\"off\" />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-12 px-3\">\n          <div class=\"form-group\">\n            <label>Description</label>\n            <input type=\"text\" class=\"form-control\" placeholder=\"Description\" formControlName=\"description\" autocomplete=\"off\" />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-md-12 px-3\">\n          <div class=\"form-group\">\n            <label>Attachment</label>\n            <!-- this input to display the selected attachment name -->\n            <input class=\"form-control\" type=\"text\" disabled [attr.value]=\"attachment?.name || 'Not selected'\">\n            <!-- this input to will really hold the actual value of attachment_id -->\n            <input type=\"hidden\" formControlName=\"attachment_id\">\n            <!-- this to change the file -->\n            <app-attachments-uploader class=\"form-control mt-2\" [limit]=\"1\" [attachments]=\"attachment ? [attachment] : []\" (valueChange)=\"setSelectedAttachment($event)\"></app-attachments-uploader>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"update ml-auto mr-auto\">\n          <button type=\"submit\" class=\"btn btn-primary btn-round\" [disabled]=\"uploading || !formGroup.dirty || !formGroup.valid\" (click)=\"submit()\">\n            Submit\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</ng-template>","import { Component, ViewChild, ElementRef, OnInit } from '@angular/core';\nimport { ResourceFormContent } from 'src/app/shared/dashboard-resource/resource-form/resource-form.component';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { NgbModal, NgbModalRef, NgbModalOptions } from '@ng-bootstrap/ng-bootstrap';\nimport { Attachment } from 'src/app/models/attachment.model';\n\n@Component({\n  selector: 'app-brand-form',\n  templateUrl: './brand-form.component.html',\n  styleUrls: ['./brand-form.component.scss']\n})\nexport class BrandFormComponent extends ResourceFormContent implements OnInit {\n  title: string;\n  message: string;\n  formGroup: FormGroup;\n\n  attachment: Attachment;\n\n  @ViewChild('content') content: ElementRef<HTMLElement>;\n\n  constructor(http: HttpClient, route: ActivatedRoute, router: Router, service: NgbModal) {\n    super(http, route, router, service);\n\n    this.formGroup = new FormGroup({\n      name: new FormControl(null, Validators.required),\n      description: new FormControl(null, Validators.required),\n      attachment_id: new FormControl(null, Validators.required),\n    });\n  }\n\n  ngOnInit(): void {\n    const e = history.state.resource;\n    if (!e)\n    {\n      return;\n    }\n    this.attachment = new Attachment(e.attachment?.id, e.attachment?.type, e?.attachment.url, e?.attachment.name);\n  }\n\n  openModal(): NgbModalRef {\n    const options: NgbModalOptions = {\n      backdrop: 'static'\n    };\n\n    return this.service.open(this.content, options);\n  }\n\n  get postUrl(): string {\n    return 'brandsCreateUrl';\n  }\n\n  get putUrl(): string {\n    return 'brandsUpdateUrl';\n  }\n\n  get parentUrl(): string {\n    return '/brands';\n  }\n\n  setSelectedAttachment(e: { ids: number[], entities: Attachment[] }): void {\n    if (!e || !e.ids || !e.entities || e.ids.length !== e.entities.length || e.ids.length !== 1)\n    {\n      this.attachment = null;\n      this.formGroup.patchValue({\n        attachment_id: null,\n      });\n      return;\n    }\n    this.attachment = e.entities[0];\n    this.formGroup.patchValue({ attachment_id: e.ids[0] });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IndexComponent } from './index/index.component';\nimport { BrandsResolver } from './brands.resolver';\nimport { BrandDeleteComponent } from './brand-delete/brand-delete.component';\nimport { BrandDetailsComponent } from './brand-details/brand-details.component';\nimport { BrandFormComponent } from './brand-form/brand-form.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: IndexComponent,\n    runGuardsAndResolvers: 'always',\n    resolve: {\n      brands: BrandsResolver\n    },\n    children: [\n      {\n        path: 'create',\n        component: BrandFormComponent,\n      },\n      {\n        path: ':id/edit',\n        component: BrandFormComponent,\n      },\n      {\n        path: ':id/details',\n        pathMatch: 'full',\n        component: BrandDetailsComponent,\n      },\n      {\n        path: ':id/delete',\n        pathMatch: 'full',\n        component: BrandDeleteComponent,\n      },\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class BrandsRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { BrandsRoutingModule } from './brands-routing.module';\nimport { IndexComponent } from './index/index.component';\nimport { DashboardResourceModule } from 'src/app/shared/dashboard-resource/dashboard-resource.module';\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { AuthInterceptor } from 'src/app/interceptors/auth.interceptor';\n\nimport { BrandsResolver } from './brands.resolver';\nimport { BrandDeleteComponent } from './brand-delete/brand-delete.component';\nimport { BrandDetailsComponent } from './brand-details/brand-details.component';\nimport { BrandFormComponent } from './brand-form/brand-form.component';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { AttachmentsModule } from 'src/app/shared/attachments/attachments.module';\n\n@NgModule({\n  declarations: [IndexComponent, BrandDeleteComponent, BrandDetailsComponent, BrandFormComponent],\n  imports: [\n    CommonModule,\n    BrandsRoutingModule,\n    NgbModule,\n    RouterModule,\n    ReactiveFormsModule,\n    DashboardResourceModule,\n    AttachmentsModule,\n  ],\n  providers: [\n    BrandsResolver,\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\n  ]\n})\nexport class BrandsModule { }\n"],"sourceRoot":"webpack:///"}