(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{jo0l:function(t,e,r){"use strict";r.r(e),r.d(e,"ExchangeModule",(function(){return E}));var n=r("ofXK"),o=r("tyNb"),c=r("Ubi2"),a=r("fXoL");const s=["table"];let i=(()=>{class t{constructor(t){this.context={urls:{createUrl:"/exchange/create",deleteUrl:"/exchange/:id/delete"},behaviour:{noDetails:!0,noEdit:!0},pagination:void 0,properties:[{key:"id",title:"ID",type:"int"},{key:"value",title:"Value",type:"float"},{key:"changed_at",title:"Changed at",type:"datetime"}],title:"exchange"},c.a.initializePaginationContext(t,this.context)}}return t.\u0275fac=function(e){return new(e||t)(a.Lb(o.a))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-index"]],viewQuery:function(t,e){var r;1&t&&a.Jc(s,!0),2&t&&a.sc(r=a.dc())&&(e.table=r.first)},decls:2,vars:1,consts:[[3,"context"],["table",""]],template:function(t,e){1&t&&a.Mb(0,"app-table-view",0,1),2&t&&a.lc("context",e.context)},directives:[c.a],styles:[""]}),t})();var l=r("w+MF");let u=(()=>{class t{constructor(t){t.parent.data.subscribe(e=>{t.params.subscribe(t=>{const r=Number.parseInt(t.id,10),n=e.resources.data.find(t=>t.id===r);this.context={deleteUrl:"exchangeDeleteUrl",data:n,title:"Delete Exchange Resource!",description:"Are you sure to delete this exchange?"}})})}}return t.\u0275fac=function(e){return new(e||t)(a.Lb(o.a))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-exchange-delete"]],decls:1,vars:1,consts:[[3,"context"]],template:function(t,e){1&t&&a.Mb(0,"app-resource-delete",0),2&t&&a.lc("context",e.context)},directives:[l.a],styles:[""]}),t})();var b=r("3Pt+"),p=r("0PJQ"),d=r("tk/3"),f=r("1kSV");const h=["content"];function m(t,e){if(1&t){const t=a.Sb();a.Rb(0,"div",2),a.Rb(1,"h6",3),a.Ec(2),a.Qb(),a.Rb(3,"button",4),a.cc("click",(function(){return a.uc(t),a.ec().ok()})),a.Rb(4,"span",5),a.Ec(5,"\xd7"),a.Qb(),a.Qb(),a.Qb(),a.Rb(6,"div",6),a.Rb(7,"form",7),a.cc("submit",(function(){return a.uc(t),a.ec().submit()})),a.Rb(8,"div",8),a.Rb(9,"div",9),a.Rb(10,"div",10),a.Rb(11,"label"),a.Ec(12,"1 USD"),a.Qb(),a.Mb(13,"input",11),a.Qb(),a.Qb(),a.Qb(),a.Rb(14,"div",8),a.Rb(15,"div",12),a.Rb(16,"button",13),a.Ec(17," Submit "),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=a.ec();a.yb(2),a.Fc(t.title),a.yb(5),a.lc("formGroup",t.formGroup),a.yb(9),a.lc("disabled",t.uploading||!t.formGroup.dirty||!t.formGroup.valid)}}let v=(()=>{class t extends p.b{constructor(t,e,r,n){super(t,e,r,n),this.formGroup=new b.i({value:new b.f(null,b.C.required)})}openModal(){return this.service.open(this.content,{backdrop:"static",keyboard:!1})}get postUrl(){return"exchangeCreateUrl"}get putUrl(){throw new Error("Update is not supported for this kind of resources")}get parentUrl(){return"/exchange"}}return t.\u0275fac=function(e){return new(e||t)(a.Lb(d.b),a.Lb(o.a),a.Lb(o.f),a.Lb(f.r))},t.\u0275cmp=a.Fb({type:t,selectors:[["app-exchange-form"]],viewQuery:function(t,e){var r;1&t&&a.Jc(h,!0),2&t&&a.sc(r=a.dc())&&(e.content=r.first)},features:[a.vb],decls:4,vars:1,consts:[["type","info",3,"close"],["content",""],[1,"modal-header"],[1,"modal-title","pt-1","mt-1"],["type","button",1,"close",2,"border","none","outline","none",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","submit"],[1,"row"],[1,"col-12","px-3"],[1,"form-group"],["type","number","min","0","placeholder","quantity in IQD","formControlName","value","autocomplete","off",1,"form-control"],[1,"update","ml-auto","mr-auto"],["type","submit",1,"btn","btn-primary","btn-round",3,"disabled"]],template:function(t,e){1&t&&(a.Rb(0,"ngb-alert",0),a.cc("close",(function(){return e.ok()})),a.Ec(1),a.Qb(),a.Cc(2,m,18,3,"ng-template",null,1,a.Dc)),2&t&&(a.yb(1),a.Fc(e.message))},directives:[f.c,b.E,b.r,b.j,b.u,b.c,b.q,b.h],styles:[""]}),t})();var y=r("AytR"),g=r("lJxs"),x=r("xt2p");let w=(()=>{class t{constructor(t){this.http=t}parse(t){return t?new x.a(t.id,t.value,new Date(t.changed_at)):null}resolve(t,e){let r=new d.f;return Object.keys(t.queryParams).forEach(e=>r=r.set(e,t.queryParams[e])),this.http.get(y.a.prepareUrl("exchangeFetchUrl"),{params:r}).pipe(Object(g.a)(t=>({data:t.data.map(t=>this.parse(t)),total:t.total,per_page:t.per_page,current_page:t.current_page,from:t.from,to:t.to,path:t.path,first_page_url:t.first_page_url,prev_page_url:t.prev_page_url,next_page_url:t.next_page_url,last_page_url:t.last_page_url,last_page:t.last_page,filter:new Map})))}}return t.\u0275fac=function(e){return new(e||t)(a.Zb(d.b))},t.\u0275prov=a.Hb({token:t,factory:t.\u0275fac}),t})();const k=[{path:"",component:i,runGuardsAndResolvers:(t,e)=>{var r;return null!==(r=history.state.runResolvers)&&void 0!==r&&r},resolve:{resources:w},children:[{path:"create",component:v},{path:":id/delete",component:u}]}];let R=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(e){return new(e||t)},imports:[[o.j.forChild(k)],o.j]}),t})();var Q=r("uP1v"),_=r("RDNO");let E=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(e){return new(e||t)},providers:[w,{provide:d.a,useClass:_.a,multi:!0}],imports:[[n.c,R,f.s,o.j,b.y,Q.a]]}),t})()},"w+MF":function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var n=r("AytR"),o=r("fXoL"),c=r("tk/3"),a=r("tyNb"),s=r("1kSV"),i=r("OC8m");const l=["content"];function u(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",2),o.Rb(1,"h6",3),o.Ec(2),o.Qb(),o.Rb(3,"p"),o.Ec(4),o.Qb(),o.Qb(),o.Rb(5,"div",4),o.Rb(6,"button",5),o.cc("click",(function(){return o.uc(t),o.ec().delete()})),o.Ec(7,"Delete"),o.Qb(),o.Rb(8,"button",6),o.cc("click",(function(){return o.uc(t),o.ec().ok()})),o.Ec(9,"Cancel"),o.Qb(),o.Qb()}if(2&t){const t=o.ec();o.yb(2),o.Fc(null==t.context?null:t.context.title),o.yb(2),o.Fc(null==t.context?null:t.context.description),o.yb(2),o.lc("disabled",t.uploading)}}let b=(()=>{class t{constructor(t,e,r,n,o){this.http=t,this.router=e,this.route=r,this.modalService=n,this.notifier=o,this.uploading=!1}ngAfterViewInit(){this.modal=this.modalService.open(this.content,{backdrop:"static",keyboard:!1,size:"sm"}),this.modal&&this.context&&this.context.data||this.ok()}delete(){this.uploading=!0,this.http.delete(n.a.prepareUrl(this.context.deleteUrl,this.context.data)).subscribe(t=>{if(t)return history.state.runResolvers=!0,this.notifier.success("Resource deleted successfully"),this.ok(),void(this.uploading=!1);this.uploading=!1,this.notifier.error("Somthing went wrong, Failed to delete the resource")},t=>this.uploading=!1)}ok(){this.modal?this.modal.dismiss():this.modalService.dismissAll(),this.router.navigate(["../../"],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(c.b),o.Lb(a.f),o.Lb(a.a),o.Lb(s.r),o.Lb(i.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-resource-delete"]],viewQuery:function(t,e){var r;1&t&&o.Jc(l,!0),2&t&&o.sc(r=o.dc())&&(e.content=r.first)},inputs:{context:"context"},decls:4,vars:0,consts:[["type","info",3,"close"],["content",""],[1,"modal-body"],[1,"modal-title","mt-1","pt-2"],[1,"modal-footer"],[1,"btn","btn-sm","btn-rounded","btn-danger",3,"disabled","click"],[1,"btn","btn-sm","btn-rounded","btn-secondary",3,"click"]],template:function(t,e){1&t&&(o.Rb(0,"ngb-alert",0),o.cc("close",(function(){return e.ok()})),o.Ec(1,"Delete resource"),o.Qb(),o.Cc(2,u,10,3,"ng-template",null,1,o.Dc))},directives:[s.c],styles:[""]}),t})()}}]);